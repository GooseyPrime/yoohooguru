# Environment Configuration Template
# Copy this file to .env and fill in your actual values
# 
# ⚠️ CRITICAL: Firebase Emulator Configuration
# - NEVER set FIRESTORE_EMULATOR_HOST or FIREBASE_AUTH_EMULATOR_HOST in production/staging
# - Emulator variables are ONLY for test environments (see .env.test)
# - Setting emulators in production will cause deployment failures
# 
# See docs/ENVIRONMENT_SETUP.md for complete configuration guide

# ── Frontend (Vercel) ─────────────────────────────────────────────────
# Use REACT_APP_* for React with Webpack
REACT_APP_API_URL=https://api.yoohoo.guru/api
REACT_APP_FIREBASE_API_KEY=your_firebase_api_key_here
REACT_APP_FIREBASE_AUTH_DOMAIN=
REACT_APP_FIREBASE_PROJECT_ID=
REACT_APP_FIREBASE_STORAGE_BUCKET=
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=
REACT_APP_FIREBASE_APP_ID=

# Frontend branding and contact information (public)
REACT_APP_BRAND_NAME=yoohoo.guru
REACT_APP_DISPLAY_NAME=yoohoo.guru
REACT_APP_LEGAL_EMAIL=legal@yoohoo.guru
REACT_APP_PRIVACY_EMAIL=privacy@yoohoo.guru
REACT_APP_SUPPORT_EMAIL=support@yoohoo.guru
REACT_APP_CONTACT_ADDRESS=yoohoo.guru, Legal Department

# ── Backend (Railway) ────────────────────────────────────────────────
NODE_ENV=production
SERVE_FRONTEND=false
# Multiple origins comma-separated, no spaces
# PRODUCTION: Use specific domains only (no wildcards)
CORS_ORIGIN_PRODUCTION=https://yoohoo.guru,https://www.yoohoo.guru

# Session Secret
# REQUIRED: Generate a secure random string for session encryption
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# NOTE: Sessions are automatically stored in Firestore in production/staging environments
#       to prevent memory leaks and support horizontal scaling. Development uses MemoryStore.
# ⚠️ WARNING: Never use default/example values in production. Server will reject insecure secrets.
SESSION_SECRET=

# Firebase Admin (Service Account)
# PRODUCTION: Use your actual Firebase project ID for production deployments
# DEVELOPMENT: Use your-dev-project-id (lowercase alphanumeric with hyphens)
# PROHIBITED: demo-project, test-project, mock-project, Invalid_Project_ID
# ⚠️ WARNING: Never commit production Firebase project IDs to public repositories
FIREBASE_PROJECT_ID=
FIREBASE_API_KEY=your_firebase_api_key_here
FIREBASE_CLIENT_EMAIL=
FIREBASE_PRIVATE_KEY=
# ⚠️ WARNING: Never use default/example values in production. Server will reject insecure secrets.
JWT_SECRET=

# Stripe Configuration
# ⚠️ IMPORTANT: Use TEST keys for development (sk_test_*, pk_test_*)
# Production keys (sk_live_*, pk_live_*) should ONLY be set in Railway/production
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
# REQUIRED for production/staging: Get from Stripe webhook settings
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
STRIPE_WEBHOOK_ID=we_your_webhook_id

# Stripe Price IDs
STRIPE_GURU_PASS_PRICE_ID=price_your_guru_pass_price_id
STRIPE_SKILL_VERIFICATION_PRICE_ID=price_your_skill_verification_price_id
STRIPE_TRUST_SAFETY_PRICE_ID=price_your_trust_safety_price_id

# OpenRouter AI Configuration (Primary)
OPENROUTER_API_KEY=your_openrouter_api_key
OPENROUTER_API_URL=https://openrouter.ai/api/v1

# OpenAI Configuration (Fallback)
OPENAI_API_KEY=sk-your_openai_api_key_here

# Unsplash API Configuration (for location background images)
# Get your free API key at: https://unsplash.com/developers
UNSPLASH_ACCESS_KEY=your_unsplash_access_key_here

# Google Maps API Configuration
# Required for location autocomplete, geocoding, and maps display
# Get your API key at: https://console.cloud.google.com/google/maps-apis
# Enable: Places API, Geocoding API, Maps JavaScript API
# NOTE: Use NEXT_PUBLIC_ prefix for Next.js apps (not REACT_APP_)
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# Google OAuth Configuration
GOOGLE_OAUTH_CLIENT_ID=your_google_oauth_client_id
GOOGLE_OAUTH_CLIENT_SECRET=your_google_oauth_client_secret

# Agora Video Conferencing Configuration
# Get your credentials at: https://console.agora.io
# Agora RTC (Real-Time Communication) keys
AGORA_APP_ID=your_app_id
AGORA_APP_CERTIFICATE=your_primary_certificate
AGORA_REGION=us
# Agora REST credentials (for Chat, recording, etc.)
AGORA_REST_KEY=your_restful_key
AGORA_REST_SECRET=your_restful_secret
# Agora Chat (IM) keys if using in-session text chat
AGORA_CHAT_APP_KEY=your_chat_app_key
AGORA_CHAT_ORG_NAME=your_chat_org_name
AGORA_CHAT_APP_NAME=your_chat_app_name

# NextAuth Configuration (for Next.js authentication)
# Generate NEXTAUTH_SECRET with: openssl rand -base64 32
# ⚠️ WARNING: Never use default/example values in production. Server will reject insecure secrets.
NEXTAUTH_SECRET=
NEXTAUTH_URL=https://yoohoo.guru
# For cross-subdomain SSO (coach.yoohoo.guru, angel.yoohoo.guru, masters.yoohoo.guru)
AUTH_COOKIE_DOMAIN=.yoohoo.guru

# JWT Configuration (Duplicate - see JWT_SECRET above)
JWT_EXPIRES_IN=7d

# Session Configuration (Duplicate - see SESSION_SECRET above)

# Email Configuration (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password

# Database Configuration
DATABASE_URL=your_database_connection_string_if_using_additional_db

# App Configuration
APP_NAME=yoohoo.guru
APP_DOMAIN=localhost:3000
APP_SUPPORT_EMAIL=support@yoohoo.guru

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# File Upload
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp

# Logging
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log

# CI/Test Environment
# Note: LOG_FILE_PATH is optional - if not provided, defaults to ./logs directory
# For CI environments, this can be left unset or set to empty string

# ——— Admin / Ops ———
ADMIN_KEY=change-me-in-prod
ADMIN_WRITE_ENABLED=false

# ——— Application Branding & Contact ———
APP_BRAND_NAME=yoohoo.guru
APP_DISPLAY_NAME=yoohoo.guru
APP_LEGAL_EMAIL=legal@yoohoo.guru
APP_PRIVACY_EMAIL=privacy@yoohoo.guru
APP_SUPPORT_EMAIL=support@yoohoo.guru
APP_CONTACT_ADDRESS=yoohoo.guru, Legal Department

# ——— CORS & Security ———
CORS_ORIGIN_PRODUCTION=https://yoohoo.guru,https://www.yoohoo.guru
CORS_ORIGIN_DEVELOPMENT=http://localhost:3000,http://127.0.0.1:3000

# ——— Server Configuration ———
EXPRESS_JSON_LIMIT=10mb
EXPRESS_URL_LIMIT=10mb
RATE_LIMIT_MESSAGE=Too many requests from this IP, please try again later.

# ——— Frontend Development ———
FRONTEND_DEV_PORT=3000
WEBPACK_DEV_OPEN=true
WEBPACK_DEV_HOT=true

# ——— Frontend Serving (for backend) ———
# Set to false when frontend is deployed separately (e.g., to Vercel)
SERVE_FRONTEND=true

# ——— API Configuration ———
API_WELCOME_MESSAGE=Welcome to yoohoo.guru API
API_VERSION=1.0.0
API_DESCRIPTION=Skill-sharing platform backend

# ——— External URLs (for caching/optimization) ———
GOOGLE_FONTS_STYLESHEETS_URL=https://fonts.googleapis.com/
GOOGLE_FONTS_WEBFONTS_URL=https://fonts.gstatic.com/
CACHE_MAX_ENTRIES=30
CACHE_MAX_AGE_SECONDS=31536000

# ——— Feature Flags ———
# Control feature availability across environments
ADMIN_WRITE_ENABLED=false
FEATURE_AI_RECOMMENDATIONS=false
FEATURE_MOBILE_APP=false
FEATURE_DARK_MODE=false
FEATURE_INTERNATIONAL_SUPPORT=false
FEATURE_ODD_JOBS=true
FEATURE_ODD_JOBS_HOURLY=false
FEATURE_ODD_JOBS_MATERIALS=false
FEATURE_BACKGROUND_CHECKS=false

# ——— Hero Guru's Configuration (formerly Modified Masters) ———
# Accessibility-first skill sharing for disability communities
FEATURE_HERO_GURUS=true
HERO_GURUS_DONATE_URL=https://buy.stripe.com/eVqfZif9PeTT2uR1PXdQQ03
HERO_GURUS_ENABLE_SUBDOMAIN=true
# Optional moderation for Hero Guru's skill creation:
HERO_GURUS_REQUIRE_REVIEW=false

# Legacy aliases (for backwards compatibility):
FEATURE_MODIFIED_MASTERS=true
MODIFIED_MASTERS_DONATE_URL=https://buy.stripe.com/eVqfZif9PeTT2uR1PXdQQ03
MODIFIED_MASTERS_ENABLE_SUBDOMAIN=true
MODIFIED_MASTERS_REQUIRE_REVIEW=false
# ────────────────────────────────────────────────────────────────────────
# ⚠️ IMPORTANT: Variables to EXCLUDE from Production/Staging
# ────────────────────────────────────────────────────────────────────────
# 
# DO NOT set these in production or staging environments:
# 
# ❌ FIRESTORE_EMULATOR_HOST=localhost:8080
# ❌ FIREBASE_AUTH_EMULATOR_HOST=localhost:9099
# ❌ FIREBASE_STORAGE_EMULATOR_HOST=localhost:9199
# 
# These emulator variables are ONLY for test environments.
# They are configured in .env.test and backend/.env.test
# 
# Setting emulators in production/staging will cause this error:
# "Environment configuration error: Emulator hosts configured with NODE_ENV=production"
# 
# For more information, see: docs/ENVIRONMENT_SETUP.md
