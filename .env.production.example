# ═══════════════════════════════════════════════════════════════════════════
# Production Environment Configuration - yoohoo.guru Platform
# ═══════════════════════════════════════════════════════════════════════════
# 
# This is the UNIFIED production environment configuration for:
# - Backend API (Railway): Node.js/Express
# - Frontend (Vercel): Next.js gateway app serving all 29 subdomains
# - Firebase: Firestore database and authentication
# 
# ARCHITECTURE:
# - Frontend (Vercel): Single Next.js app with Edge Middleware for all subdomains
# - Backend API (Railway): Node.js/Express API at api.yoohoo.guru
# - Database: Firebase Firestore
# - Auth: Firebase Authentication + NextAuth.js for cross-subdomain sessions
# 
# DEPLOYMENT:
# 1. Frontend: Set NEXT_PUBLIC_* variables in Vercel dashboard
# 2. Backend: Set all non-NEXT_PUBLIC_* variables in Railway dashboard
# 3. Both: Set shared secrets (NEXTAUTH_SECRET, AUTH_COOKIE_DOMAIN)
# 
# ⚠️ SECURITY WARNINGS:
# - NEVER commit this file with real values to version control
# - Generate strong random secrets for production (see generation commands below)
# - Use environment-specific secrets in Vercel/Railway dashboards
# - Rotate secrets regularly
# 
# See docs/ENVIRONMENT_VARIABLES.md for complete documentation
# ═══════════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────────
# 🌐 SHARED CONFIGURATION (Both Frontend & Backend)
# ───────────────────────────────────────────────────────────────────────────

# Node Environment
# REQUIRED: Must be 'production' for production deployments
NODE_ENV=production

# Cross-Subdomain Authentication
# REQUIRED: Shared secret for NextAuth.js JWT signing
# Generate: openssl rand -base64 32
# ⚠️ CRITICAL: Must be IDENTICAL in both Vercel and Railway for cross-subdomain SSO
NEXTAUTH_SECRET=

# REQUIRED: Cookie domain for cross-subdomain authentication
# Allows users to stay logged in across www, coach, angel, etc.
AUTH_COOKIE_DOMAIN=.yoohoo.guru

# ───────────────────────────────────────────────────────────────────────────
# 🎨 FRONTEND CONFIGURATION (Vercel - Next.js)
# ───────────────────────────────────────────────────────────────────────────
# All NEXT_PUBLIC_* variables are exposed to the browser
# Set these in Vercel dashboard environment variables

# API Endpoint
# REQUIRED: Backend API URL
NEXT_PUBLIC_API_URL=https://api.yoohoo.guru

# Firebase Client Configuration
# REQUIRED: Frontend Firebase SDK configuration
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=

# Stripe Public Key
# REQUIRED for payments: Use live key (pk_live_*) in production
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=

# Google Maps API
# REQUIRED for location features (autocomplete, geocoding, maps)
# Get from: https://console.cloud.google.com/google/maps-apis
# Enable: Places API, Geocoding API, Maps JavaScript API
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=

# Agora Video Conferencing (Public)
# OPTIONAL: For video sessions
NEXT_PUBLIC_AGORA_APP_ID=
NEXT_PUBLIC_AGORA_REGION=us

# Analytics (Optional)
# Google Analytics and Tag Manager
NEXT_PUBLIC_GA_MEASUREMENT_ID=
NEXT_PUBLIC_GTM_CONTAINER_ID=
NEXT_PUBLIC_VERCEL_ANALYTICS=true

# NextAuth URL (Per-App Configuration)
# REQUIRED: Set per subdomain if deploying multiple apps
# Main app: NEXTAUTH_URL=https://www.yoohoo.guru
# Coach: NEXTAUTH_URL=https://coach.yoohoo.guru
# Angel: NEXTAUTH_URL=https://angel.yoohoo.guru
NEXTAUTH_URL=https://www.yoohoo.guru

# Google OAuth Credentials (Frontend)
# OPTIONAL: For Google Sign-In on frontend
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=

# ───────────────────────────────────────────────────────────────────────────
# 🔧 BACKEND CONFIGURATION (Railway - Node.js/Express API)
# ───────────────────────────────────────────────────────────────────────────
# Set these in Railway dashboard environment variables

# Server Configuration
PORT=3001
SERVE_FRONTEND=false

# Session Secret
# REQUIRED: Generate a secure random string for session encryption
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ⚠️ WARNING: Never use default/example values. Server will reject insecure secrets.
# NOTE: Sessions are stored in Firestore in production for scalability
SESSION_SECRET=

# JWT Configuration
# REQUIRED: Secret key for JWT token signing
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ⚠️ WARNING: Never use default/example values. Server will reject insecure secrets.
JWT_SECRET=
JWT_EXPIRES_IN=7d

# Firebase Admin (Service Account)
# REQUIRED: Backend Firebase Admin SDK credentials
# ⚠️ CRITICAL: Use your actual Firebase project ID for production
# Get service account from: Firebase Console > Project Settings > Service Accounts
FIREBASE_PROJECT_ID=
FIREBASE_API_KEY=
FIREBASE_CLIENT_EMAIL=
FIREBASE_PRIVATE_KEY=

# Stripe Configuration
# REQUIRED for payments: Use live keys (sk_live_*, pk_live_*) in production
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_WEBHOOK_ID=

# Stripe Price IDs
# REQUIRED for subscriptions: Get from Stripe dashboard
STRIPE_GURU_PASS_PRICE_ID=
STRIPE_SKILL_VERIFICATION_PRICE_ID=
STRIPE_TRUST_SAFETY_PRICE_ID=

# AI Services
# PRIMARY: OpenRouter (recommended)
OPENROUTER_API_KEY=
OPENROUTER_API_URL=https://openrouter.ai/api/v1

# FALLBACK: OpenAI/ChatGPT
OPENAI_API_KEY=

# News Curation
# OPTIONAL: NewsAPI.org for real news articles in blog/news sections
# Get free API key at: https://newsapi.org/register
# NOTE: Falls back to RSS feeds if not configured
NEWS_API_KEY=

# Unsplash API
# OPTIONAL: For location background images
# Get free API key at: https://unsplash.com/developers
UNSPLASH_ACCESS_KEY=

# Agora Video Conferencing (Server)
# OPTIONAL: For video session token generation
AGORA_APP_ID=
AGORA_APP_CERTIFICATE=
AGORA_REGION=us
AGORA_REST_KEY=
AGORA_REST_SECRET=
AGORA_CHAT_APP_KEY=
AGORA_CHAT_ORG_NAME=
AGORA_CHAT_APP_NAME=

# ───────────────────────────────────────────────────────────────────────────
# 📧 EMAIL CONFIGURATION (Optional)
# ───────────────────────────────────────────────────────────────────────────

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# ───────────────────────────────────────────────────────────────────────────
# 🎯 APPLICATION BRANDING & CONTACT
# ───────────────────────────────────────────────────────────────────────────

APP_BRAND_NAME=yoohoo.guru
APP_DISPLAY_NAME=yoohoo.guru
APP_LEGAL_EMAIL=legal@yoohoo.guru
APP_PRIVACY_EMAIL=privacy@yoohoo.guru
APP_SUPPORT_EMAIL=support@yoohoo.guru
APP_CONTACT_ADDRESS=yoohoo.guru, Legal Department

# ───────────────────────────────────────────────────────────────────────────
# 🔒 CORS & SECURITY
# ───────────────────────────────────────────────────────────────────────────

# REQUIRED: Allowed origins for API requests (comma-separated, no spaces)
# Include all production subdomains
CORS_ORIGIN_PRODUCTION=https://yoohoo.guru,https://www.yoohoo.guru,https://api.yoohoo.guru,https://*.yoohoo.guru,https://*.vercel.app

# ───────────────────────────────────────────────────────────────────────────
# ⚙️ SERVER CONFIGURATION
# ───────────────────────────────────────────────────────────────────────────

EXPRESS_JSON_LIMIT=10mb
EXPRESS_URL_LIMIT=10mb

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_MESSAGE=Too many requests from this IP, please try again later.

# File Upload
MAX_FILE_SIZE=5242880
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp

# Logging
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log

# ───────────────────────────────────────────────────────────────────────────
# 🎬 API CONFIGURATION
# ───────────────────────────────────────────────────────────────────────────

API_WELCOME_MESSAGE=Welcome to yoohoo.guru API
API_VERSION=1.0.0
API_DESCRIPTION=Skill-sharing platform backend

# ───────────────────────────────────────────────────────────────────────────
# 🌐 EXTERNAL RESOURCES (Caching/Optimization)
# ───────────────────────────────────────────────────────────────────────────

GOOGLE_FONTS_STYLESHEETS_URL=https://fonts.googleapis.com/
GOOGLE_FONTS_WEBFONTS_URL=https://fonts.gstatic.com/
CACHE_MAX_ENTRIES=30
CACHE_MAX_AGE_SECONDS=31536000

# ───────────────────────────────────────────────────────────────────────────
# 🚩 FEATURE FLAGS
# ───────────────────────────────────────────────────────────────────────────

FEATURE_AI_RECOMMENDATIONS=false
FEATURE_MOBILE_APP=false
FEATURE_DARK_MODE=false
FEATURE_INTERNATIONAL_SUPPORT=false
FEATURE_ODD_JOBS=true
FEATURE_ODD_JOBS_HOURLY=false
FEATURE_ODD_JOBS_MATERIALS=false
FEATURE_BACKGROUND_CHECKS=false

# Hero Guru's Configuration (Accessibility-first skill sharing)
FEATURE_HERO_GURUS=true
HERO_GURUS_DONATE_URL=https://buy.stripe.com/eVqfZif9PeTT2uR1PXdQQ03
HERO_GURUS_ENABLE_SUBDOMAIN=true
HERO_GURUS_REQUIRE_REVIEW=false

# ───────────────────────────────────────────────────────────────────────────
# 🔐 ADMIN & OPERATIONS
# ───────────────────────────────────────────────────────────────────────────

ADMIN_KEY=
ADMIN_WRITE_ENABLED=false

# ═══════════════════════════════════════════════════════════════════════════
# ⚠️ PROHIBITED IN PRODUCTION
# ═══════════════════════════════════════════════════════════════════════════
# 
# The following variables are PROHIBITED in production/staging:
# 
# ❌ FIRESTORE_EMULATOR_HOST - Only for test/development
# ❌ FIREBASE_AUTH_EMULATOR_HOST - Only for test/development
# ❌ FIREBASE_STORAGE_EMULATOR_HOST - Only for test/development
# ❌ USE_MOCKS=true - Mocks prohibited in production
# 
# Setting emulators in production will cause fatal errors.
# See docs/ENVIRONMENT_SETUP.md for details.
# ═══════════════════════════════════════════════════════════════════════════
