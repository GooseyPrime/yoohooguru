2025-09-29T21:28:23.8156407Z Current runner version: '2.328.0'
2025-09-29T21:28:23.8180953Z ##[group]Runner Image Provisioner
2025-09-29T21:28:23.8181713Z Hosted Compute Agent
2025-09-29T21:28:23.8182259Z Version: 20250912.392
2025-09-29T21:28:23.8182789Z Commit: d921fda672a98b64f4f82364647e2f10b2267d0b
2025-09-29T21:28:23.8183547Z Build Date: 2025-09-12T15:23:14Z
2025-09-29T21:28:23.8184094Z ##[endgroup]
2025-09-29T21:28:23.8184636Z ##[group]Operating System
2025-09-29T21:28:23.8185391Z Ubuntu
2025-09-29T21:28:23.8185829Z 24.04.3
2025-09-29T21:28:23.8186281Z LTS
2025-09-29T21:28:23.8186769Z ##[endgroup]
2025-09-29T21:28:23.8187297Z ##[group]Runner Image
2025-09-29T21:28:23.8187843Z Image: ubuntu-24.04
2025-09-29T21:28:23.8188414Z Version: 20250922.53.1
2025-09-29T21:28:23.8189406Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250922.53/images/ubuntu/Ubuntu2404-Readme.md
2025-09-29T21:28:23.8191548Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250922.53
2025-09-29T21:28:23.8192590Z ##[endgroup]
2025-09-29T21:28:23.8195060Z ##[group]GITHUB_TOKEN Permissions
2025-09-29T21:28:23.8197147Z Actions: write
2025-09-29T21:28:23.8197708Z Attestations: write
2025-09-29T21:28:23.8198253Z Checks: write
2025-09-29T21:28:23.8198796Z Contents: write
2025-09-29T21:28:23.8199260Z Deployments: write
2025-09-29T21:28:23.8200056Z Discussions: write
2025-09-29T21:28:23.8200569Z Issues: write
2025-09-29T21:28:23.8201055Z Metadata: read
2025-09-29T21:28:23.8201578Z Models: read
2025-09-29T21:28:23.8202046Z Packages: write
2025-09-29T21:28:23.8202581Z Pages: write
2025-09-29T21:28:23.8203019Z PullRequests: write
2025-09-29T21:28:23.8203612Z RepositoryProjects: write
2025-09-29T21:28:23.8204139Z SecurityEvents: write
2025-09-29T21:28:23.8204749Z Statuses: write
2025-09-29T21:28:23.8205349Z ##[endgroup]
2025-09-29T21:28:23.8207686Z Secret source: Actions
2025-09-29T21:28:23.8208570Z Prepare workflow directory
2025-09-29T21:28:23.8610890Z Prepare all required actions
2025-09-29T21:28:23.8665257Z Getting action download info
2025-09-29T21:28:24.2192319Z Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
2025-09-29T21:28:24.4000299Z Download action repository 'actions/setup-node@v4' (SHA:49933ea5288caeca8642d1e84afbd3f7d6820020)
2025-09-29T21:28:24.5467053Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2025-09-29T21:28:24.7454575Z Complete job name: Build & Test (20.x)
2025-09-29T21:28:24.8113517Z ##[group]Run actions/checkout@v4
2025-09-29T21:28:24.8114389Z with:
2025-09-29T21:28:24.8114838Z   repository: GooseyPrime/yoohooguru
2025-09-29T21:28:24.8115546Z   token: ***
2025-09-29T21:28:24.8115960Z   ssh-strict: true
2025-09-29T21:28:24.8116375Z   ssh-user: git
2025-09-29T21:28:24.8116790Z   persist-credentials: true
2025-09-29T21:28:24.8117258Z   clean: true
2025-09-29T21:28:24.8117689Z   sparse-checkout-cone-mode: true
2025-09-29T21:28:24.8118263Z   fetch-depth: 1
2025-09-29T21:28:24.8118684Z   fetch-tags: false
2025-09-29T21:28:24.8119146Z   show-progress: true
2025-09-29T21:28:24.8119572Z   lfs: false
2025-09-29T21:28:24.8120132Z   submodules: false
2025-09-29T21:28:24.8120558Z   set-safe-directory: true
2025-09-29T21:28:24.8121279Z ##[endgroup]
2025-09-29T21:28:24.9225952Z Syncing repository: GooseyPrime/yoohooguru
2025-09-29T21:28:24.9227756Z ##[group]Getting Git version info
2025-09-29T21:28:24.9228498Z Working directory is '/home/runner/work/yoohooguru/yoohooguru'
2025-09-29T21:28:24.9229601Z [command]/usr/bin/git version
2025-09-29T21:28:24.9423053Z git version 2.51.0
2025-09-29T21:28:24.9449946Z ##[endgroup]
2025-09-29T21:28:24.9466882Z Temporarily overriding HOME='/home/runner/work/_temp/8a03a86a-ce64-4f5a-869a-77110df1fc18' before making global git config changes
2025-09-29T21:28:24.9469586Z Adding repository directory to the temporary git global config as a safe directory
2025-09-29T21:28:24.9473955Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/yoohooguru/yoohooguru
2025-09-29T21:28:24.9513008Z Deleting the contents of '/home/runner/work/yoohooguru/yoohooguru'
2025-09-29T21:28:24.9517554Z ##[group]Initializing the repository
2025-09-29T21:28:24.9522565Z [command]/usr/bin/git init /home/runner/work/yoohooguru/yoohooguru
2025-09-29T21:28:24.9619399Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-09-29T21:28:24.9621070Z hint: is subject to change. To configure the initial branch name to use in all
2025-09-29T21:28:24.9622005Z hint: of your new repositories, which will suppress this warning, call:
2025-09-29T21:28:24.9623153Z hint:
2025-09-29T21:28:24.9624106Z hint: 	git config --global init.defaultBranch <name>
2025-09-29T21:28:24.9625235Z hint:
2025-09-29T21:28:24.9626374Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-09-29T21:28:24.9628230Z hint: 'development'. The just-created branch can be renamed via this command:
2025-09-29T21:28:24.9629694Z hint:
2025-09-29T21:28:24.9630847Z hint: 	git branch -m <name>
2025-09-29T21:28:24.9631792Z hint:
2025-09-29T21:28:24.9632890Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-09-29T21:28:24.9634838Z Initialized empty Git repository in /home/runner/work/yoohooguru/yoohooguru/.git/
2025-09-29T21:28:24.9637858Z [command]/usr/bin/git remote add origin https://github.com/GooseyPrime/yoohooguru
2025-09-29T21:28:24.9676996Z ##[endgroup]
2025-09-29T21:28:24.9678291Z ##[group]Disabling automatic garbage collection
2025-09-29T21:28:24.9681501Z [command]/usr/bin/git config --local gc.auto 0
2025-09-29T21:28:24.9713150Z ##[endgroup]
2025-09-29T21:28:24.9714519Z ##[group]Setting up auth
2025-09-29T21:28:24.9720177Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-29T21:28:24.9750662Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-29T21:28:25.0099675Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-29T21:28:25.0135495Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-29T21:28:25.0379255Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-09-29T21:28:25.0416349Z ##[endgroup]
2025-09-29T21:28:25.0417175Z ##[group]Fetching the repository
2025-09-29T21:28:25.0426068Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +529e0f31fe1e4aa0d450018757d3b946d286beb1:refs/remotes/pull/209/merge
2025-09-29T21:28:25.7771270Z From https://github.com/GooseyPrime/yoohooguru
2025-09-29T21:28:25.7773059Z  * [new ref]         529e0f31fe1e4aa0d450018757d3b946d286beb1 -> pull/209/merge
2025-09-29T21:28:25.7803902Z ##[endgroup]
2025-09-29T21:28:25.7805896Z ##[group]Determining the checkout info
2025-09-29T21:28:25.7807901Z ##[endgroup]
2025-09-29T21:28:25.7812151Z [command]/usr/bin/git sparse-checkout disable
2025-09-29T21:28:25.7856242Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2025-09-29T21:28:25.7885695Z ##[group]Checking out the ref
2025-09-29T21:28:25.7889313Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/209/merge
2025-09-29T21:28:25.8822324Z Note: switching to 'refs/remotes/pull/209/merge'.
2025-09-29T21:28:25.8823523Z 
2025-09-29T21:28:25.8824469Z You are in 'detached HEAD' state. You can look around, make experimental
2025-09-29T21:28:25.8826911Z changes and commit them, and you can discard any commits you make in this
2025-09-29T21:28:25.8829490Z state without impacting any branches by switching back to a branch.
2025-09-29T21:28:25.8831218Z 
2025-09-29T21:28:25.8832167Z If you want to create a new branch to retain commits you create, you may
2025-09-29T21:28:25.8834311Z do so (now or later) by using -c with the switch command. Example:
2025-09-29T21:28:25.8835627Z 
2025-09-29T21:28:25.8835996Z   git switch -c <new-branch-name>
2025-09-29T21:28:25.8836618Z 
2025-09-29T21:28:25.8836963Z Or undo this operation with:
2025-09-29T21:28:25.8837641Z 
2025-09-29T21:28:25.8838098Z   git switch -
2025-09-29T21:28:25.8838729Z 
2025-09-29T21:28:25.8839473Z Turn off this advice by setting config variable advice.detachedHead to false
2025-09-29T21:28:25.8840866Z 
2025-09-29T21:28:25.8842121Z HEAD is now at 529e0f3 Merge f5f0696a500853e6c71408d32d3fe163ec8d50a2 into 4829b87d7bbb3010f2b3c4482603bf9401c35815
2025-09-29T21:28:25.8846455Z ##[endgroup]
2025-09-29T21:28:25.8880304Z [command]/usr/bin/git log -1 --format=%H
2025-09-29T21:28:25.8903270Z 529e0f31fe1e4aa0d450018757d3b946d286beb1
2025-09-29T21:28:25.9225290Z ##[group]Run actions/setup-node@v4
2025-09-29T21:28:25.9226488Z with:
2025-09-29T21:28:25.9227335Z   node-version: 20.x
2025-09-29T21:28:25.9228277Z   cache: npm
2025-09-29T21:28:25.9229168Z   always-auth: false
2025-09-29T21:28:25.9230277Z   check-latest: false
2025-09-29T21:28:25.9231521Z   token: ***
2025-09-29T21:28:25.9232370Z ##[endgroup]
2025-09-29T21:28:26.1350488Z Found in cache @ /opt/hostedtoolcache/node/20.19.5/x64
2025-09-29T21:28:26.1353278Z ##[group]Environment details
2025-09-29T21:28:28.5560289Z node: v20.19.5
2025-09-29T21:28:28.5560722Z npm: 10.8.2
2025-09-29T21:28:28.5561124Z yarn: 1.22.22
2025-09-29T21:28:28.5562423Z ##[endgroup]
2025-09-29T21:28:28.5590863Z [command]/opt/hostedtoolcache/node/20.19.5/x64/bin/npm config get cache
2025-09-29T21:28:28.8775919Z /home/runner/.npm
2025-09-29T21:28:29.0134100Z npm cache is not found
2025-09-29T21:28:29.0286661Z ##[group]Run npm ci
2025-09-29T21:28:29.0286959Z [36;1mnpm ci[0m
2025-09-29T21:28:29.0287170Z [36;1mcd frontend && npm ci[0m
2025-09-29T21:28:29.0287419Z [36;1mcd ../backend && npm install[0m
2025-09-29T21:28:29.0409533Z shell: /usr/bin/bash -e {0}
2025-09-29T21:28:29.0409969Z ##[endgroup]
2025-09-29T21:28:37.1535488Z npm warn deprecated supertest@6.3.4: Please upgrade to supertest v7.1.3+, see release notes at https://github.com/forwardemail/supertest/releases/tag/v7.1.3 - maintenance is supported by Forward Email @ https://forwardemail.net
2025-09-29T21:28:37.3787617Z npm warn deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead
2025-09-29T21:28:37.5866552Z npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2025-09-29T21:28:38.7403953Z npm warn deprecated superagent@8.1.2: Please upgrade to superagent v10.2.2+, see release notes at https://github.com/forwardemail/superagent/releases/tag/v10.2.2 - maintenance is supported by Forward Email @ https://forwardemail.net
2025-09-29T21:28:39.2069183Z npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead
2025-09-29T21:28:39.2096855Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-09-29T21:28:39.5147212Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-09-29T21:28:40.1760095Z npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
2025-09-29T21:28:40.9267644Z npm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
2025-09-29T21:28:41.8326593Z npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
2025-09-29T21:28:41.8334597Z npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2025-09-29T21:28:44.0175275Z npm warn deprecated source-map@0.8.0-beta.0: The work that was done in this beta branch won't be included in future versions
2025-09-29T21:28:49.2849940Z npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2025-09-29T21:30:16.2788476Z 
2025-09-29T21:30:16.2791890Z added 1883 packages, and audited 1886 packages in 2m
2025-09-29T21:30:16.2793486Z 
2025-09-29T21:30:16.2793943Z 277 packages are looking for funding
2025-09-29T21:30:16.2794437Z   run `npm fund` for details
2025-09-29T21:30:17.0684337Z 
2025-09-29T21:30:17.0685353Z 10 moderate severity vulnerabilities
2025-09-29T21:30:17.0686830Z 
2025-09-29T21:30:17.0687099Z To address all issues, run:
2025-09-29T21:30:17.0687577Z   npm audit fix
2025-09-29T21:30:17.0687827Z 
2025-09-29T21:30:17.0688051Z Run `npm audit` for details.
2025-09-29T21:30:23.3240627Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-09-29T21:30:23.5440929Z npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
2025-09-29T21:30:23.5672308Z npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2025-09-29T21:30:23.6079375Z npm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
2025-09-29T21:30:23.7141334Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-09-29T21:30:23.7254632Z npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2025-09-29T21:30:23.8291531Z npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
2025-09-29T21:30:23.8520341Z npm warn deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead
2025-09-29T21:30:24.3571939Z npm warn deprecated source-map@0.8.0-beta.0: The work that was done in this beta branch won't be included in future versions
2025-09-29T21:30:27.0531735Z npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2025-09-29T21:30:30.9904870Z 
2025-09-29T21:30:30.9905862Z added 1278 packages, and audited 1280 packages in 14s
2025-09-29T21:30:30.9906359Z 
2025-09-29T21:30:30.9906622Z 211 packages are looking for funding
2025-09-29T21:30:30.9907097Z   run `npm fund` for details
2025-09-29T21:30:31.7975667Z 
2025-09-29T21:30:31.7976440Z 10 moderate severity vulnerabilities
2025-09-29T21:30:31.7976758Z 
2025-09-29T21:30:31.7976924Z To address all issues, run:
2025-09-29T21:30:31.7977272Z   npm audit fix
2025-09-29T21:30:31.7977438Z 
2025-09-29T21:30:31.7977597Z Run `npm audit` for details.
2025-09-29T21:30:34.6803409Z npm warn deprecated supertest@6.3.4: Please upgrade to supertest v7.1.3+, see release notes at https://github.com/forwardemail/supertest/releases/tag/v7.1.3 - maintenance is supported by Forward Email @ https://forwardemail.net
2025-09-29T21:30:35.6473503Z npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead
2025-09-29T21:30:35.8796145Z npm warn deprecated superagent@8.1.2: Please upgrade to superagent v10.2.2+, see release notes at https://github.com/forwardemail/superagent/releases/tag/v10.2.2 - maintenance is supported by Forward Email @ https://forwardemail.net
2025-09-29T21:30:40.0420656Z 
2025-09-29T21:30:40.0421450Z added 588 packages, and audited 1869 packages in 8s
2025-09-29T21:30:40.0421967Z 
2025-09-29T21:30:40.0422312Z 274 packages are looking for funding
2025-09-29T21:30:40.0422899Z   run `npm fund` for details
2025-09-29T21:30:40.8294620Z 
2025-09-29T21:30:40.8295318Z 10 moderate severity vulnerabilities
2025-09-29T21:30:40.8295601Z 
2025-09-29T21:30:40.8295744Z To address all issues, run:
2025-09-29T21:30:40.8296148Z   npm audit fix
2025-09-29T21:30:40.8296293Z 
2025-09-29T21:30:40.8296472Z Run `npm audit` for details.
2025-09-29T21:30:40.8793940Z ##[group]Run cd backend && npm run lint
2025-09-29T21:30:40.8794285Z [36;1mcd backend && npm run lint[0m
2025-09-29T21:30:40.8827367Z shell: /usr/bin/bash -e {0}
2025-09-29T21:30:40.8827609Z ##[endgroup]
2025-09-29T21:30:41.0190084Z 
2025-09-29T21:30:41.0190852Z > yoohooguru-backend@1.0.0 lint
2025-09-29T21:30:41.0191812Z > eslint src/ --ext .js
2025-09-29T21:30:41.0192082Z 
2025-09-29T21:30:42.1024022Z ##[group]Run cd frontend && npm run test:ci
2025-09-29T21:30:42.1024380Z [36;1mcd frontend && npm run test:ci[0m
2025-09-29T21:30:42.1056772Z shell: /usr/bin/bash -e {0}
2025-09-29T21:30:42.1057015Z ##[endgroup]
2025-09-29T21:30:42.2389110Z 
2025-09-29T21:30:42.2389711Z > yoohoo-guru-frontend@1.0.0 test:ci
2025-09-29T21:30:42.2390488Z > jest --watchAll=false --coverage --passWithNoTests
2025-09-29T21:30:42.2390762Z 
2025-09-29T21:30:44.8763587Z PASS src/components/ErrorBoundary.test.js
2025-09-29T21:30:45.5067538Z PASS src/components/SubdomainLandingPage.test.js
2025-09-29T21:30:45.5651955Z   ● Console
2025-09-29T21:30:45.5656230Z 
2025-09-29T21:30:45.5660488Z     console.warn
2025-09-29T21:30:45.5665821Z       ⚠️ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
2025-09-29T21:30:45.5673395Z 
2025-09-29T21:30:45.5673716Z     [0m [90m 92 |[39m
2025-09-29T21:30:45.5675112Z      [90m 93 |[39m [36mconst[39m renderSubdomainLandingPage [33m=[39m (subdomain [33m=[39m [32m'cooking'[39m[33m,[39m config [33m=[39m mockCookingConfig) [33m=>[39m {
2025-09-29T21:30:45.5676363Z     [31m[1m>[22m[39m[90m 94 |[39m   [36mreturn[39m render(
2025-09-29T21:30:45.5677061Z      [90m    |[39m                [31m[1m^[22m[39m
2025-09-29T21:30:45.5677761Z      [90m 95 |[39m     [33m<[39m[33mBrowserRouter[39m[33m>[39m
2025-09-29T21:30:45.5678686Z      [90m 96 |[39m       [33m<[39m[33mThemeProvider[39m theme[33m=[39m{mockTheme}[33m>[39m
2025-09-29T21:30:45.5680396Z      [90m 97 |[39m         [33m<[39m[33mSubdomainLandingPage[39m subdomain[33m=[39m{subdomain} config[33m=[39m{config} [33m/[39m[33m>[39m[0m
2025-09-29T21:30:45.5681154Z 
2025-09-29T21:30:45.5681525Z       at warn (../node_modules/react-router/lib/deprecations.ts:9:13)
2025-09-29T21:30:45.5682319Z       at warnOnce (../node_modules/react-router/lib/deprecations.ts:14:3)
2025-09-29T21:30:45.5683352Z       at Object.logDeprecation [as UNSAFE_logV6DeprecationWarnings] (../node_modules/react-router/lib/deprecations.ts:26:5)
2025-09-29T21:30:45.5684597Z       at logV6DeprecationWarnings (../node_modules/react-router-dom/index.tsx:816:25)
2025-09-29T21:30:45.5685718Z       at commitHookEffectListMount (../node_modules/react-dom/cjs/react-dom.development.js:23189:26)
2025-09-29T21:30:45.5686933Z       at commitPassiveMountOnFiber (../node_modules/react-dom/cjs/react-dom.development.js:24970:11)
2025-09-29T21:30:45.5688220Z       at commitPassiveMountEffects_complete (../node_modules/react-dom/cjs/react-dom.development.js:24930:9)
2025-09-29T21:30:45.5689587Z       at commitPassiveMountEffects_begin (../node_modules/react-dom/cjs/react-dom.development.js:24917:7)
2025-09-29T21:30:45.5691034Z       at commitPassiveMountEffects (../node_modules/react-dom/cjs/react-dom.development.js:24905:3)
2025-09-29T21:30:45.5691896Z       at flushPassiveEffectsImpl (../node_modules/react-dom/cjs/react-dom.development.js:27078:3)
2025-09-29T21:30:45.5692542Z       at flushPassiveEffects (../node_modules/react-dom/cjs/react-dom.development.js:27023:14)
2025-09-29T21:30:45.5693090Z       at ../node_modules/react-dom/cjs/react-dom.development.js:26808:9
2025-09-29T21:30:45.5693578Z       at flushActQueue (../node_modules/react/cjs/react.development.js:2667:24)
2025-09-29T21:30:45.5694033Z       at act (../node_modules/react/cjs/react.development.js:2582:11)
2025-09-29T21:30:45.5694466Z       at ../node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-09-29T21:30:45.5694924Z       at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)
2025-09-29T21:30:45.5695393Z       at render (../node_modules/@testing-library/react/dist/pure.js:292:10)
2025-09-29T21:30:45.5695937Z       at renderSubdomainLandingPage (src/components/SubdomainLandingPage.test.js:94:16)
2025-09-29T21:30:45.5697150Z       at Object.renderSubdomainLandingPage (src/components/SubdomainLandingPage.test.js:122:5)
2025-09-29T21:30:45.5697525Z 
2025-09-29T21:30:45.5697609Z     console.warn
2025-09-29T21:30:45.5698834Z       ⚠️ React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.
2025-09-29T21:30:45.5699651Z 
2025-09-29T21:30:45.5700021Z     [0m [90m 92 |[39m
2025-09-29T21:30:45.5700893Z      [90m 93 |[39m [36mconst[39m renderSubdomainLandingPage [33m=[39m (subdomain [33m=[39m [32m'cooking'[39m[33m,[39m config [33m=[39m mockCookingConfig) [33m=>[39m {
2025-09-29T21:30:45.5701605Z     [31m[1m>[22m[39m[90m 94 |[39m   [36mreturn[39m render(
2025-09-29T21:30:45.5701987Z      [90m    |[39m                [31m[1m^[22m[39m
2025-09-29T21:30:45.5702407Z      [90m 95 |[39m     [33m<[39m[33mBrowserRouter[39m[33m>[39m
2025-09-29T21:30:45.5702926Z      [90m 96 |[39m       [33m<[39m[33mThemeProvider[39m theme[33m=[39m{mockTheme}[33m>[39m
2025-09-29T21:30:45.5703711Z      [90m 97 |[39m         [33m<[39m[33mSubdomainLandingPage[39m subdomain[33m=[39m{subdomain} config[33m=[39m{config} [33m/[39m[33m>[39m[0m
2025-09-29T21:30:45.5704132Z 
2025-09-29T21:30:45.5704331Z       at warn (../node_modules/react-router/lib/deprecations.ts:9:13)
2025-09-29T21:30:45.5704772Z       at warnOnce (../node_modules/react-router/lib/deprecations.ts:14:3)
2025-09-29T21:30:45.5705413Z       at Object.logDeprecation [as UNSAFE_logV6DeprecationWarnings] (../node_modules/react-router/lib/deprecations.ts:37:5)
2025-09-29T21:30:45.5706080Z       at logV6DeprecationWarnings (../node_modules/react-router-dom/index.tsx:816:25)
2025-09-29T21:30:45.5706688Z       at commitHookEffectListMount (../node_modules/react-dom/cjs/react-dom.development.js:23189:26)
2025-09-29T21:30:45.5707347Z       at commitPassiveMountOnFiber (../node_modules/react-dom/cjs/react-dom.development.js:24970:11)
2025-09-29T21:30:45.5708019Z       at commitPassiveMountEffects_complete (../node_modules/react-dom/cjs/react-dom.development.js:24930:9)
2025-09-29T21:30:45.5708718Z       at commitPassiveMountEffects_begin (../node_modules/react-dom/cjs/react-dom.development.js:24917:7)
2025-09-29T21:30:45.5709377Z       at commitPassiveMountEffects (../node_modules/react-dom/cjs/react-dom.development.js:24905:3)
2025-09-29T21:30:45.5710192Z       at flushPassiveEffectsImpl (../node_modules/react-dom/cjs/react-dom.development.js:27078:3)
2025-09-29T21:30:45.5710806Z       at flushPassiveEffects (../node_modules/react-dom/cjs/react-dom.development.js:27023:14)
2025-09-29T21:30:45.5711326Z       at ../node_modules/react-dom/cjs/react-dom.development.js:26808:9
2025-09-29T21:30:45.5711786Z       at flushActQueue (../node_modules/react/cjs/react.development.js:2667:24)
2025-09-29T21:30:45.5712250Z       at act (../node_modules/react/cjs/react.development.js:2582:11)
2025-09-29T21:30:45.5712682Z       at ../node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-09-29T21:30:45.5713137Z       at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)
2025-09-29T21:30:45.5713607Z       at render (../node_modules/@testing-library/react/dist/pure.js:292:10)
2025-09-29T21:30:45.5714134Z       at renderSubdomainLandingPage (src/components/SubdomainLandingPage.test.js:94:16)
2025-09-29T21:30:45.5714762Z       at Object.renderSubdomainLandingPage (src/components/SubdomainLandingPage.test.js:122:5)
2025-09-29T21:30:45.5715105Z 
2025-09-29T21:30:45.5715186Z     console.error
2025-09-29T21:30:45.5716220Z       Warning: React does not recognize the `primaryColor` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `primarycolor` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
2025-09-29T21:30:45.5717321Z           at h1
2025-09-29T21:30:45.5718002Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5718590Z           at div
2025-09-29T21:30:45.5719144Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5719678Z           at section
2025-09-29T21:30:45.5720903Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5721963Z           at div
2025-09-29T21:30:45.5723027Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5724686Z           at subdomain (/home/runner/work/yoohooguru/yoohooguru/frontend/src/components/SubdomainLandingPage.js:343:33)
2025-09-29T21:30:45.5726607Z           at Object.<anonymous>.exports.ThemeProvider (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/ThemeProvider.tsx:55:32)
2025-09-29T21:30:45.5728410Z           at basenameProp (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router/lib/components.tsx:421:13)
2025-09-29T21:30:45.5730116Z           at basename (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router-dom/index.tsx:789:3)
2025-09-29T21:30:45.5730852Z 
2025-09-29T21:30:45.5731363Z       at printWarning (../node_modules/react-dom/cjs/react-dom.development.js:86:30)
2025-09-29T21:30:45.5732326Z       at error (../node_modules/react-dom/cjs/react-dom.development.js:60:7)
2025-09-29T21:30:45.5733400Z       at validateProperty$1 (../node_modules/react-dom/cjs/react-dom.development.js:3757:7)
2025-09-29T21:30:45.5734578Z       at warnUnknownProperties (../node_modules/react-dom/cjs/react-dom.development.js:3803:21)
2025-09-29T21:30:45.5735761Z       at validateProperties$2 (../node_modules/react-dom/cjs/react-dom.development.js:3827:3)
2025-09-29T21:30:45.5737047Z       at validatePropertiesInDevelopment (../node_modules/react-dom/cjs/react-dom.development.js:9541:5)
2025-09-29T21:30:45.5738285Z       at setInitialProperties (../node_modules/react-dom/cjs/react-dom.development.js:9830:5)
2025-09-29T21:30:45.5739441Z       at finalizeInitialChildren (../node_modules/react-dom/cjs/react-dom.development.js:10950:3)
2025-09-29T21:30:45.5740801Z       at completeWork (../node_modules/react-dom/cjs/react-dom.development.js:22232:17)
2025-09-29T21:30:45.5741864Z       at completeUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26632:16)
2025-09-29T21:30:45.5742968Z       at performUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26607:5)
2025-09-29T21:30:45.5744023Z       at workLoopSync (../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
2025-09-29T21:30:45.5745031Z       at renderRootSync (../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
2025-09-29T21:30:45.5746270Z       at performConcurrentWorkOnRoot (../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
2025-09-29T21:30:45.5747421Z       at workLoop (../node_modules/scheduler/cjs/scheduler.development.js:266:34)
2025-09-29T21:30:45.5748421Z       at flushWork (../node_modules/scheduler/cjs/scheduler.development.js:239:14)
2025-09-29T21:30:45.5749582Z       at performWorkUntilDeadline (../node_modules/scheduler/cjs/scheduler.development.js:533:21)
2025-09-29T21:30:45.5750559Z 
2025-09-29T21:30:45.5750732Z     console.error
2025-09-29T21:30:45.5751334Z       Warning: Received `true` for a non-boolean attribute `primary`.
2025-09-29T21:30:45.5751932Z       
2025-09-29T21:30:45.5752699Z       If you want to write it to the DOM, pass a string instead: primary="true" or primary={value.toString()}.
2025-09-29T21:30:45.5753436Z           at button
2025-09-29T21:30:45.5754476Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5756331Z           at children (/home/runner/work/yoohooguru/yoohooguru/frontend/src/components/Button.js:66:3)
2025-09-29T21:30:45.5757143Z           at div
2025-09-29T21:30:45.5758199Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5759179Z           at div
2025-09-29T21:30:45.5760394Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5761401Z           at section
2025-09-29T21:30:45.5762484Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5763457Z           at div
2025-09-29T21:30:45.5764500Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5766149Z           at subdomain (/home/runner/work/yoohooguru/yoohooguru/frontend/src/components/SubdomainLandingPage.js:343:33)
2025-09-29T21:30:45.5767937Z           at Object.<anonymous>.exports.ThemeProvider (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/ThemeProvider.tsx:55:32)
2025-09-29T21:30:45.5769676Z           at basenameProp (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router/lib/components.tsx:421:13)
2025-09-29T21:30:45.5771213Z           at basename (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router-dom/index.tsx:789:3)
2025-09-29T21:30:45.5771885Z 
2025-09-29T21:30:45.5772349Z       at printWarning (../node_modules/react-dom/cjs/react-dom.development.js:86:30)
2025-09-29T21:30:45.5773250Z       at error (../node_modules/react-dom/cjs/react-dom.development.js:60:7)
2025-09-29T21:30:45.5774225Z       at validateProperty$1 (../node_modules/react-dom/cjs/react-dom.development.js:3765:9)
2025-09-29T21:30:45.5775372Z       at warnUnknownProperties (../node_modules/react-dom/cjs/react-dom.development.js:3803:21)
2025-09-29T21:30:45.5776491Z       at validateProperties$2 (../node_modules/react-dom/cjs/react-dom.development.js:3827:3)
2025-09-29T21:30:45.5777697Z       at validatePropertiesInDevelopment (../node_modules/react-dom/cjs/react-dom.development.js:9541:5)
2025-09-29T21:30:45.5778908Z       at setInitialProperties (../node_modules/react-dom/cjs/react-dom.development.js:9830:5)
2025-09-29T21:30:45.5780229Z       at finalizeInitialChildren (../node_modules/react-dom/cjs/react-dom.development.js:10950:3)
2025-09-29T21:30:45.5781326Z       at completeWork (../node_modules/react-dom/cjs/react-dom.development.js:22232:17)
2025-09-29T21:30:45.5782385Z       at completeUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26632:16)
2025-09-29T21:30:45.5783472Z       at performUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26607:5)
2025-09-29T21:30:45.5784510Z       at workLoopSync (../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
2025-09-29T21:30:45.5785528Z       at renderRootSync (../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
2025-09-29T21:30:45.5786662Z       at performConcurrentWorkOnRoot (../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
2025-09-29T21:30:45.5787736Z       at workLoop (../node_modules/scheduler/cjs/scheduler.development.js:266:34)
2025-09-29T21:30:45.5788657Z       at flushWork (../node_modules/scheduler/cjs/scheduler.development.js:239:14)
2025-09-29T21:30:45.5789728Z       at performWorkUntilDeadline (../node_modules/scheduler/cjs/scheduler.development.js:533:21)
2025-09-29T21:30:45.5790507Z 
2025-09-29T21:30:45.5790652Z     console.error
2025-09-29T21:30:45.5791237Z       Warning: Received `true` for a non-boolean attribute `secondary`.
2025-09-29T21:30:45.5791799Z       
2025-09-29T21:30:45.5792543Z       If you want to write it to the DOM, pass a string instead: secondary="true" or secondary={value.toString()}.
2025-09-29T21:30:45.5793606Z           at button
2025-09-29T21:30:45.5794881Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5796428Z           at children (/home/runner/work/yoohooguru/yoohooguru/frontend/src/components/Button.js:66:3)
2025-09-29T21:30:45.5797240Z           at div
2025-09-29T21:30:45.5798310Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5799326Z           at div
2025-09-29T21:30:45.5800934Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5802012Z           at section
2025-09-29T21:30:45.5803107Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5804124Z           at div
2025-09-29T21:30:45.5805196Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5806842Z           at subdomain (/home/runner/work/yoohooguru/yoohooguru/frontend/src/components/SubdomainLandingPage.js:343:33)
2025-09-29T21:30:45.5808637Z           at Object.<anonymous>.exports.ThemeProvider (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/ThemeProvider.tsx:55:32)
2025-09-29T21:30:45.5810653Z           at basenameProp (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router/lib/components.tsx:421:13)
2025-09-29T21:30:45.5812037Z           at basename (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router-dom/index.tsx:789:3)
2025-09-29T21:30:45.5812692Z 
2025-09-29T21:30:45.5813142Z       at printWarning (../node_modules/react-dom/cjs/react-dom.development.js:86:30)
2025-09-29T21:30:45.5814033Z       at error (../node_modules/react-dom/cjs/react-dom.development.js:60:7)
2025-09-29T21:30:45.5814968Z       at validateProperty$1 (../node_modules/react-dom/cjs/react-dom.development.js:3765:9)
2025-09-29T21:30:45.5815980Z       at warnUnknownProperties (../node_modules/react-dom/cjs/react-dom.development.js:3803:21)
2025-09-29T21:30:45.5816988Z       at validateProperties$2 (../node_modules/react-dom/cjs/react-dom.development.js:3827:3)
2025-09-29T21:30:45.5818074Z       at validatePropertiesInDevelopment (../node_modules/react-dom/cjs/react-dom.development.js:9541:5)
2025-09-29T21:30:45.5819247Z       at setInitialProperties (../node_modules/react-dom/cjs/react-dom.development.js:9830:5)
2025-09-29T21:30:45.5820504Z       at finalizeInitialChildren (../node_modules/react-dom/cjs/react-dom.development.js:10950:3)
2025-09-29T21:30:45.5821527Z       at completeWork (../node_modules/react-dom/cjs/react-dom.development.js:22232:17)
2025-09-29T21:30:45.5822511Z       at completeUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26632:16)
2025-09-29T21:30:45.5823604Z       at performUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26607:5)
2025-09-29T21:30:45.5824568Z       at workLoopSync (../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
2025-09-29T21:30:45.5825491Z       at renderRootSync (../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
2025-09-29T21:30:45.5826575Z       at performConcurrentWorkOnRoot (../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
2025-09-29T21:30:45.5827610Z       at workLoop (../node_modules/scheduler/cjs/scheduler.development.js:266:34)
2025-09-29T21:30:45.5828506Z       at flushWork (../node_modules/scheduler/cjs/scheduler.development.js:239:14)
2025-09-29T21:30:45.5829546Z       at performWorkUntilDeadline (../node_modules/scheduler/cjs/scheduler.development.js:533:21)
2025-09-29T21:30:45.5830383Z 
2025-09-29T21:30:45.5830530Z     console.error
2025-09-29T21:30:45.5832695Z       Warning: React does not recognize the `secondaryColor` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `secondarycolor` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
2025-09-29T21:30:45.5834615Z           at section
2025-09-29T21:30:45.5835678Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5836662Z           at div
2025-09-29T21:30:45.5837693Z           at displayName (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/StyledComponent.ts:271:26)
2025-09-29T21:30:45.5839202Z           at subdomain (/home/runner/work/yoohooguru/yoohooguru/frontend/src/components/SubdomainLandingPage.js:343:33)
2025-09-29T21:30:45.5841136Z           at Object.<anonymous>.exports.ThemeProvider (/home/runner/work/yoohooguru/yoohooguru/node_modules/styled-components/src/models/ThemeProvider.tsx:55:32)
2025-09-29T21:30:45.5842837Z           at basenameProp (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router/lib/components.tsx:421:13)
2025-09-29T21:30:45.5844231Z           at basename (/home/runner/work/yoohooguru/yoohooguru/node_modules/react-router-dom/index.tsx:789:3)
2025-09-29T21:30:45.5844916Z 
2025-09-29T21:30:45.5845387Z       at printWarning (../node_modules/react-dom/cjs/react-dom.development.js:86:30)
2025-09-29T21:30:45.5846307Z       at error (../node_modules/react-dom/cjs/react-dom.development.js:60:7)
2025-09-29T21:30:45.5847272Z       at validateProperty$1 (../node_modules/react-dom/cjs/react-dom.development.js:3757:7)
2025-09-29T21:30:45.5848365Z       at warnUnknownProperties (../node_modules/react-dom/cjs/react-dom.development.js:3803:21)
2025-09-29T21:30:45.5849472Z       at validateProperties$2 (../node_modules/react-dom/cjs/react-dom.development.js:3827:3)
2025-09-29T21:30:45.5850937Z       at validatePropertiesInDevelopment (../node_modules/react-dom/cjs/react-dom.development.js:9541:5)
2025-09-29T21:30:45.5852119Z       at setInitialProperties (../node_modules/react-dom/cjs/react-dom.development.js:9830:5)
2025-09-29T21:30:45.5853240Z       at finalizeInitialChildren (../node_modules/react-dom/cjs/react-dom.development.js:10950:3)
2025-09-29T21:30:45.5854354Z       at completeWork (../node_modules/react-dom/cjs/react-dom.development.js:22232:17)
2025-09-29T21:30:45.5855428Z       at completeUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26632:16)
2025-09-29T21:30:45.5856492Z       at performUnitOfWork (../node_modules/react-dom/cjs/react-dom.development.js:26607:5)
2025-09-29T21:30:45.5857543Z       at workLoopSync (../node_modules/react-dom/cjs/react-dom.development.js:26505:5)
2025-09-29T21:30:45.5858560Z       at renderRootSync (../node_modules/react-dom/cjs/react-dom.development.js:26473:7)
2025-09-29T21:30:45.5859714Z       at performConcurrentWorkOnRoot (../node_modules/react-dom/cjs/react-dom.development.js:25777:74)
2025-09-29T21:30:45.5861025Z       at workLoop (../node_modules/scheduler/cjs/scheduler.development.js:266:34)
2025-09-29T21:30:45.5861983Z       at flushWork (../node_modules/scheduler/cjs/scheduler.development.js:239:14)
2025-09-29T21:30:45.5863061Z       at performWorkUntilDeadline (../node_modules/scheduler/cjs/scheduler.development.js:533:21)
2025-09-29T21:30:45.5863691Z 
2025-09-29T21:30:45.5863891Z PASS src/App.test.js
2025-09-29T21:30:45.5977293Z   ● Console
2025-09-29T21:30:45.5977536Z 
2025-09-29T21:30:45.5977688Z     console.warn
2025-09-29T21:30:45.5980218Z       ⚠️ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
2025-09-29T21:30:45.5981857Z 
2025-09-29T21:30:45.5982134Z     [0m [90m 65 |[39m
2025-09-29T21:30:45.5982983Z      [90m 66 |[39m [36mconst[39m renderSignupPage [33m=[39m () [33m=>[39m {
2025-09-29T21:30:45.5983863Z     [31m[1m>[22m[39m[90m 67 |[39m   [36mreturn[39m render(
2025-09-29T21:30:45.5985479Z      [90m    |[39m                [31m[1m^[22m[39m
2025-09-29T21:30:45.5986330Z      [90m 68 |[39m     [33m<[39m[33mBrowserRouter[39m[33m>[39m
2025-09-29T21:30:45.5987355Z      [90m 69 |[39m       [33m<[39m[33mThemeProvider[39m theme[33m=[39m{mockTheme}[33m>[39m
2025-09-29T21:30:45.5988388Z      [90m 70 |[39m         [33m<[39m[33mSignupPage[39m [33m/[39m[33m>[39m[0m
2025-09-29T21:30:45.5988811Z 
2025-09-29T21:30:45.5989172Z       at warn (../node_modules/react-router/lib/deprecations.ts:9:13)
2025-09-29T21:30:45.5990144Z       at warnOnce (../node_modules/react-router/lib/deprecations.ts:14:3)
2025-09-29T21:30:45.5991299Z       at Object.logDeprecation [as UNSAFE_logV6DeprecationWarnings] (../node_modules/react-router/lib/deprecations.ts:26:5)
2025-09-29T21:30:45.5992493Z       at logV6DeprecationWarnings (../node_modules/react-router-dom/index.tsx:816:25)
2025-09-29T21:30:45.5993550Z       at commitHookEffectListMount (../node_modules/react-dom/cjs/react-dom.development.js:23189:26)
2025-09-29T21:30:45.5994760Z       at commitPassiveMountOnFiber (../node_modules/react-dom/cjs/react-dom.development.js:24970:11)
2025-09-29T21:30:45.5995937Z       at commitPassiveMountEffects_complete (../node_modules/react-dom/cjs/react-dom.development.js:24930:9)
2025-09-29T21:30:45.5997129Z       at commitPassiveMountEffects_begin (../node_modules/react-dom/cjs/react-dom.development.js:24917:7)
2025-09-29T21:30:45.5998253Z       at commitPassiveMountEffects (../node_modules/react-dom/cjs/react-dom.development.js:24905:3)
2025-09-29T21:30:45.5999239Z       at flushPassiveEffectsImpl (../node_modules/react-dom/cjs/react-dom.development.js:27078:3)
2025-09-29T21:30:45.6000404Z       at flushPassiveEffects (../node_modules/react-dom/cjs/react-dom.development.js:27023:14)
2025-09-29T21:30:45.6001274Z       at ../node_modules/react-dom/cjs/react-dom.development.js:26808:9
2025-09-29T21:30:45.6002060Z       at flushActQueue (../node_modules/react/cjs/react.development.js:2667:24)
2025-09-29T21:30:45.6002841Z       at act (../node_modules/react/cjs/react.development.js:2582:11)
2025-09-29T21:30:45.6003544Z       at ../node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-09-29T21:30:45.6004307Z       at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)
2025-09-29T21:30:45.6005076Z       at render (../node_modules/@testing-library/react/dist/pure.js:292:10)
2025-09-29T21:30:45.6005707Z       at renderSignupPage (src/App.test.js:67:16)
2025-09-29T21:30:45.6006269Z       at Object.renderSignupPage (src/App.test.js:82:5)
2025-09-29T21:30:45.6006599Z 
2025-09-29T21:30:45.6006727Z     console.warn
2025-09-29T21:30:45.6008748Z       ⚠️ React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.
2025-09-29T21:30:45.6010291Z 
2025-09-29T21:30:45.6010501Z     [0m [90m 65 |[39m
2025-09-29T21:30:45.6011191Z      [90m 66 |[39m [36mconst[39m renderSignupPage [33m=[39m () [33m=>[39m {
2025-09-29T21:30:45.6011967Z     [31m[1m>[22m[39m[90m 67 |[39m   [36mreturn[39m render(
2025-09-29T21:30:45.6012603Z      [90m    |[39m                [31m[1m^[22m[39m
2025-09-29T21:30:45.6013240Z      [90m 68 |[39m     [33m<[39m[33mBrowserRouter[39m[33m>[39m
2025-09-29T21:30:45.6014088Z      [90m 69 |[39m       [33m<[39m[33mThemeProvider[39m theme[33m=[39m{mockTheme}[33m>[39m
2025-09-29T21:30:45.6014961Z      [90m 70 |[39m         [33m<[39m[33mSignupPage[39m [33m/[39m[33m>[39m[0m
2025-09-29T21:30:45.6015347Z 
2025-09-29T21:30:45.6015686Z       at warn (../node_modules/react-router/lib/deprecations.ts:9:13)
2025-09-29T21:30:45.6016407Z       at warnOnce (../node_modules/react-router/lib/deprecations.ts:14:3)
2025-09-29T21:30:45.6017488Z       at Object.logDeprecation [as UNSAFE_logV6DeprecationWarnings] (../node_modules/react-router/lib/deprecations.ts:37:5)
2025-09-29T21:30:45.6019428Z       at logV6DeprecationWarnings (../node_modules/react-router-dom/index.tsx:816:25)
2025-09-29T21:30:45.6020721Z       at commitHookEffectListMount (../node_modules/react-dom/cjs/react-dom.development.js:23189:26)
2025-09-29T21:30:45.6021888Z       at commitPassiveMountOnFiber (../node_modules/react-dom/cjs/react-dom.development.js:24970:11)
2025-09-29T21:30:45.6023077Z       at commitPassiveMountEffects_complete (../node_modules/react-dom/cjs/react-dom.development.js:24930:9)
2025-09-29T21:30:45.6024340Z       at commitPassiveMountEffects_begin (../node_modules/react-dom/cjs/react-dom.development.js:24917:7)
2025-09-29T21:30:45.6025525Z       at commitPassiveMountEffects (../node_modules/react-dom/cjs/react-dom.development.js:24905:3)
2025-09-29T21:30:45.6026631Z       at flushPassiveEffectsImpl (../node_modules/react-dom/cjs/react-dom.development.js:27078:3)
2025-09-29T21:30:45.6027686Z       at flushPassiveEffects (../node_modules/react-dom/cjs/react-dom.development.js:27023:14)
2025-09-29T21:30:45.6028582Z       at ../node_modules/react-dom/cjs/react-dom.development.js:26808:9
2025-09-29T21:30:45.6029390Z       at flushActQueue (../node_modules/react/cjs/react.development.js:2667:24)
2025-09-29T21:30:45.6030469Z       at act (../node_modules/react/cjs/react.development.js:2582:11)
2025-09-29T21:30:45.6031202Z       at ../node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-09-29T21:30:45.6031979Z       at renderRoot (../node_modules/@testing-library/react/dist/pure.js:190:26)
2025-09-29T21:30:45.6032745Z       at render (../node_modules/@testing-library/react/dist/pure.js:292:10)
2025-09-29T21:30:45.6033383Z       at renderSignupPage (src/App.test.js:67:16)
2025-09-29T21:30:45.6033966Z       at Object.renderSignupPage (src/App.test.js:82:5)
2025-09-29T21:30:45.6034304Z 
2025-09-29T21:30:50.1511139Z ------------------------------|---------|----------|---------|---------|-------------------------------------------------------------
2025-09-29T21:30:50.1512653Z File                          | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                           
2025-09-29T21:30:50.1513937Z ------------------------------|---------|----------|---------|---------|-------------------------------------------------------------
2025-09-29T21:30:50.1522447Z All files                     |    6.54 |     5.77 |    6.98 |    6.74 |                                                             
2025-09-29T21:30:50.1523352Z  src                          |       0 |      100 |       0 |       0 |                                                             
2025-09-29T21:30:50.1524182Z   App.js                      |       0 |      100 |       0 |       0 | 13                                                          
2025-09-29T21:30:50.1527499Z  src/components               |   13.84 |    11.52 |   11.76 |   14.44 |                                                             
2025-09-29T21:30:50.1528584Z   AccessibilityToolbar.js     |       0 |        0 |       0 |       0 | 9-267                                                       
2025-09-29T21:30:50.1529566Z   AdminGuard.js               |       0 |        0 |       0 |       0 | 10-45                                                       
2025-09-29T21:30:50.1530671Z   AppRouter.js                |       0 |        0 |       0 |       0 | 16-472                                                      
2025-09-29T21:30:50.1531570Z   BadgeDisplay.js             |       0 |        0 |       0 |       0 | 5-406                                                       
2025-09-29T21:30:50.1532519Z   Button.js                   |   83.33 |    77.27 |   72.72 |   83.33 | 35-39                                                       
2025-09-29T21:30:50.1533898Z   CitySelectionModal.js       |       0 |        0 |       0 |       0 | 6-252                                                       
2025-09-29T21:30:50.1535673Z   ComingSoon.js               |       0 |        0 |       0 |       0 | 4-26                                                        
2025-09-29T21:30:50.1536940Z   ComplianceDashboard.js      |       0 |        0 |       0 |       0 | 6-477                                                       
2025-09-29T21:30:50.1538004Z   ComplianceSetup.js          |       0 |        0 |       0 |       0 | 7-520                                                       
2025-09-29T21:30:50.1538817Z   EarningsEstimator.js        |       0 |        0 |       0 |       0 | 7-366                                                       
2025-09-29T21:30:50.1540529Z   ErrorBoundary.js            |      96 |    83.33 |    92.3 |      96 | 92                                                          
2025-09-29T21:30:50.1541219Z   Footer.js                   |       0 |        0 |       0 |       0 | 6-99                                                        
2025-09-29T21:30:50.1541885Z   Header.js                   |       0 |        0 |       0 |       0 | 10-280                                                      
2025-09-29T21:30:50.1542678Z   HeroArt.js                  |       0 |        0 |       0 |       0 | 4-37                                                        
2025-09-29T21:30:50.1543430Z   HostSubdomainRouterGate.js  |       0 |        0 |       0 |       0 | 11-26                                                       
2025-09-29T21:30:50.1544111Z   Layout.js                   |       0 |      100 |       0 |       0 | 7-19                                                        
2025-09-29T21:30:50.1544820Z   LiabilityEnhancementDemo.js |       0 |        0 |       0 |       0 | 5-271                                                       
2025-09-29T21:30:50.1545837Z   LiabilityWaiver.js          |       0 |        0 |       0 |       0 | 4-301                                                       
2025-09-29T21:30:50.1546893Z   LiabilityWaiverModal.js     |       0 |        0 |       0 |       0 | 6-188                                                       
2025-09-29T21:30:50.1547932Z   LoadingScreen.js            |       0 |        0 |       0 |       0 | 5-67                                                        
2025-09-29T21:30:50.1548903Z   LoadingSpinner.js           |   88.88 |       70 |      80 |   88.88 | 26                                                          
2025-09-29T21:30:50.1550033Z   LocationMap.js              |       0 |        0 |       0 |       0 | 9-372                                                       
2025-09-29T21:30:50.1550912Z   Logo.js                     |       0 |        0 |       0 |       0 | 6-81                                                        
2025-09-29T21:30:50.1551818Z   ResourcesSection.js         |       0 |        0 |       0 |       0 | 10-276                                                      
2025-09-29T21:30:50.1553134Z   SEOMetadata.js              |   82.53 |       70 |      70 |    86.2 | 49,112-120                                                  
2025-09-29T21:30:50.1555331Z   SessionCard.js              |       0 |        0 |       0 |       0 | 9-276                                                       
2025-09-29T21:30:50.1556278Z   SkillMatching.js            |       0 |        0 |       0 |       0 | 13-394                                                      
2025-09-29T21:30:50.1557298Z   SubdomainLandingPage.js     |   77.87 |    54.92 |   74.19 |   80.55 | 414-416,424-439,444,448-449,486,553-566,688                 
2025-09-29T21:30:50.1558277Z   VideoChat.js                |       0 |        0 |       0 |       0 | 9-212                                                       
2025-09-29T21:30:50.1559155Z  src/components/auth          |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1560278Z   AuthStatusIndicator.js      |       0 |        0 |       0 |       0 | 6-80                                                        
2025-09-29T21:30:50.1561027Z   ProtectedRoute.js           |       0 |        0 |       0 |       0 | 11-63                                                       
2025-09-29T21:30:50.1561978Z  src/components/guru          |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1562541Z   GuruFeaturedPosts.js        |       0 |        0 |       0 |       0 | 5-244                                                       
2025-09-29T21:30:50.1563110Z   GuruHeroSection.js          |       0 |        0 |       0 |       0 | 7-168                                                       
2025-09-29T21:30:50.1563625Z  src/config                   |       0 |        0 |     100 |       0 |                                                             
2025-09-29T21:30:50.1564117Z   pricing.js                  |       0 |        0 |     100 |       0 | 4-93                                                        
2025-09-29T21:30:50.1564606Z  src/contexts                 |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1565127Z   AuthContext.js              |       0 |        0 |       0 |       0 | 5-564                                                       
2025-09-29T21:30:50.1565650Z   FeatureFlagsContext.js      |       0 |        0 |       0 |       0 | 4-44                                                        
2025-09-29T21:30:50.1566185Z   ThemeContext.js             |       0 |        0 |       0 |       0 | 3-75                                                        
2025-09-29T21:30:50.1567038Z  src/firebase                 |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1567753Z   client.js                   |       0 |        0 |       0 |       0 | 6-51                                                        
2025-09-29T21:30:50.1568350Z  src/hooks                    |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1569147Z   useGuru.js                  |       0 |        0 |       0 |       0 | 9-267                                                       
2025-09-29T21:30:50.1570101Z  src/hosting                  |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1570908Z   hostRules.js                |       0 |        0 |       0 |       0 | 11-91                                                       
2025-09-29T21:30:50.1571692Z  src/lib                      |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1572420Z   api.js                      |       0 |        0 |       0 |       0 | 9-111                                                       
2025-09-29T21:30:50.1573207Z   featureFlags.js             |       0 |        0 |       0 |       0 | 8-100                                                       
2025-09-29T21:30:50.1574086Z   matchmakingApi.js           |       0 |        0 |       0 |       0 | 15-259                                                      
2025-09-29T21:30:50.1574913Z   prefs.js                    |       0 |        0 |       0 |       0 | 2-20                                                        
2025-09-29T21:30:50.1575781Z   skillCategorization.js      |       0 |        0 |       0 |       0 | 12-225                                                      
2025-09-29T21:30:50.1576664Z   skillsApi.js                |       0 |        0 |       0 |       0 | 10-195                                                      
2025-09-29T21:30:50.1577482Z  src/screens                  |    5.09 |     4.61 |    6.75 |    5.17 |                                                             
2025-09-29T21:30:50.1578306Z   AboutPage.js                |       0 |      100 |       0 |       0 | 4-80                                                        
2025-09-29T21:30:50.1579195Z   AccountSettingsPage.js      |       0 |        0 |       0 |       0 | 17-365                                                      
2025-09-29T21:30:50.1580780Z   AdminDashboardPage.js       |       0 |        0 |       0 |       0 | 8-760                                                       
2025-09-29T21:30:50.1581721Z   AdminLoginPage.js           |       0 |        0 |       0 |       0 | 6-139                                                       
2025-09-29T21:30:50.1582612Z   AngelsListPage.js           |       0 |        0 |       0 |       0 | 9-334                                                       
2025-09-29T21:30:50.1583450Z   BlogPage.js                 |       0 |        0 |       0 |       0 | 8-509                                                       
2025-09-29T21:30:50.1584283Z   ComingSoonPage.js           |       0 |        0 |       0 |       0 | 8-66                                                        
2025-09-29T21:30:50.1585165Z   ComingSoonPages.js          |       0 |        0 |       0 |       0 | 4-204                                                       
2025-09-29T21:30:50.1586085Z   DashboardCoach.js           |       0 |        0 |       0 |       0 | 13-369                                                      
2025-09-29T21:30:50.1586958Z   DashboardPage.js            |       0 |        0 |       0 |       0 | 8-227                                                       
2025-09-29T21:30:50.1587876Z   DashboardUnderstudy.js      |       0 |        0 |       0 |       0 | 16-422                                                      
2025-09-29T21:30:50.1588769Z   EventsPage.js               |       0 |      100 |       0 |       0 | 5                                                           
2025-09-29T21:30:50.1589657Z   ForgotPasswordPage.js       |       0 |        0 |       0 |       0 | 11-214                                                      
2025-09-29T21:30:50.1590679Z   ForumPage.js                |       0 |      100 |       0 |       0 | 5                                                           
2025-09-29T21:30:50.1591487Z   HomePage.js                 |       0 |        0 |       0 |       0 | 10-450                                                      
2025-09-29T21:30:50.1592339Z   HowItWorksPage.js           |       0 |      100 |       0 |       0 | 4-87                                                        
2025-09-29T21:30:50.1593183Z   LoginPage.js                |       0 |        0 |       0 |       0 | 10-282                                                      
2025-09-29T21:30:50.1594032Z   MentorshipPage.js           |       0 |      100 |       0 |       0 | 5                                                           
2025-09-29T21:30:50.1594916Z   ModifiedMasters.js          |       0 |        0 |       0 |       0 | 11-496                                                      
2025-09-29T21:30:50.1595793Z   PricingPage.js              |       0 |        0 |       0 |       0 | 9-405                                                       
2025-09-29T21:30:50.1596677Z   PrivacyPolicyPage.js        |       0 |        0 |       0 |       0 | 5-98                                                        
2025-09-29T21:30:50.1597581Z   ProfilePage.js              |       0 |        0 |       0 |       0 | 25-481                                                      
2025-09-29T21:30:50.1598199Z   SafetyPage.js               |       0 |      100 |       0 |       0 | 5                                                           
2025-09-29T21:30:50.1598698Z   SignupPage.js               |   51.02 |    35.23 |    70.9 |   53.19 | 114,300-305,310-352,356-391,396-409,414-416,454-465,580-609 
2025-09-29T21:30:50.1599190Z   SkillsPage.js               |       0 |        0 |       0 |       0 | 10-738                                                      
2025-09-29T21:30:50.1599705Z   SubdomainLandingPages.js    |       0 |      100 |       0 |       0 | 5-336                                                       
2025-09-29T21:30:50.1600540Z   SuccessStoriesPage.js       |       0 |      100 |       0 |       0 | 5                                                           
2025-09-29T21:30:50.1601405Z   TermsAndConditionsPage.js   |       0 |        0 |       0 |       0 | 5-111                                                       
2025-09-29T21:30:50.1623090Z  src/screens/account          |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1623990Z   PayoutsPanel.js             |       0 |        0 |       0 |       0 | 5-191                                                       
2025-09-29T21:30:50.1624804Z  src/screens/guru             |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1625597Z   GuruHomePage.js             |       0 |        0 |       0 |       0 | 8-299                                                       
2025-09-29T21:30:50.1626180Z  src/screens/onboarding       |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1626774Z   OnboardingCategories.js     |       0 |        0 |       0 |       0 | 8-121                                                       
2025-09-29T21:30:50.1627349Z   OnboardingDocuments.js      |       0 |      100 |       0 |       0 | 6-121                                                       
2025-09-29T21:30:50.1627895Z   OnboardingPayout.js         |       0 |        0 |       0 |       0 | 6-153                                                       
2025-09-29T21:30:50.1628402Z   OnboardingProfile.js        |       0 |        0 |       0 |       0 | 7-85                                                        
2025-09-29T21:30:50.1628934Z   OnboardingRequirements.js   |       0 |        0 |       0 |       0 | 5-28                                                        
2025-09-29T21:30:50.1629460Z   OnboardingReview.js         |       0 |        0 |       0 |       0 | 6-135                                                       
2025-09-29T21:30:50.1630209Z   OnboardingStart.js          |       0 |        0 |       0 |       0 | 7-30                                                        
2025-09-29T21:30:50.1630711Z  src/styles                   |       0 |      100 |     100 |       0 |                                                             
2025-09-29T21:30:50.1631188Z   GlobalStyles.js             |       0 |      100 |     100 |       0 | 3                                                           
2025-09-29T21:30:50.1631645Z  src/theme                    |       0 |      100 |       0 |       0 |                                                             
2025-09-29T21:30:50.1632092Z   GlobalStyle.js              |       0 |      100 |       0 |       0 | 3-22                                                        
2025-09-29T21:30:50.1632539Z   tokens.js                   |       0 |      100 |     100 |       0 | 1                                                           
2025-09-29T21:30:50.1632962Z  src/utils                    |       0 |        0 |       0 |       0 |                                                             
2025-09-29T21:30:50.1633390Z   http.js                     |       0 |        0 |       0 |       0 | 15-112                                                      
2025-09-29T21:30:50.1633922Z ------------------------------|---------|----------|---------|---------|-------------------------------------------------------------
2025-09-29T21:30:50.3019645Z 
2025-09-29T21:30:50.3023889Z Test Suites: 3 passed, 3 total
2025-09-29T21:30:50.3025547Z Tests:       16 passed, 16 total
2025-09-29T21:30:50.3027062Z Snapshots:   0 total
2025-09-29T21:30:50.3028091Z Time:        7.634 s
2025-09-29T21:30:50.3028757Z Ran all test suites.
2025-09-29T21:30:50.3271485Z ##[group]Run cd backend
2025-09-29T21:30:50.3271766Z [36;1mcd backend[0m
2025-09-29T21:30:50.3271992Z [36;1mnpm install -g firebase-tools[0m
2025-09-29T21:30:50.3272236Z [36;1mnpm test[0m
2025-09-29T21:30:50.3304889Z shell: /usr/bin/bash -e {0}
2025-09-29T21:30:50.3305135Z env:
2025-09-29T21:30:50.3305512Z   NODE_ENV: test
2025-09-29T21:30:50.3305756Z   FIREBASE_PROJECT_ID: ceremonial-tea-470904-f3
2025-09-29T21:30:50.3306065Z   FIREBASE_CLIENT_EMAIL: 
2025-09-29T21:30:50.3306284Z   FIREBASE_PRIVATE_KEY: 
2025-09-29T21:30:50.3306499Z   FIREBASE_API_KEY: 
2025-09-29T21:30:50.3306698Z   FIREBASE_AUTH_DOMAIN: 
2025-09-29T21:30:50.3306909Z   FIREBASE_STORAGE_BUCKET: 
2025-09-29T21:30:50.3307135Z   FIREBASE_MESSAGING_SENDER_ID: 
2025-09-29T21:30:50.3307369Z   FIREBASE_APP_ID: 
2025-09-29T21:30:50.3307552Z   JWT_SECRET: 
2025-09-29T21:30:50.3307741Z   STRIPE_SECRET_KEY: 
2025-09-29T21:30:50.3307944Z   STRIPE_PUBLISHABLE_KEY: 
2025-09-29T21:30:50.3308164Z   STRIPE_WEBHOOK_SECRET: 
2025-09-29T21:30:50.3308412Z   STRIPE_WEBHOOK_ID: 
2025-09-29T21:30:50.3308621Z   STRIPE_GURU_PASS_PRICE_ID: 
2025-09-29T21:30:50.3308861Z   STRIPE_SKILL_VERIFICATION_PRICE_ID: 
2025-09-29T21:30:50.3309140Z   STRIPE_TRUST_SAFETY_PRICE_ID: 
2025-09-29T21:30:50.3309364Z ##[endgroup]
2025-09-29T21:31:05.1248689Z npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead
2025-09-29T21:31:07.6559561Z 
2025-09-29T21:31:07.6560442Z added 716 packages in 17s
2025-09-29T21:31:07.6560784Z 
2025-09-29T21:31:07.6561063Z 81 packages are looking for funding
2025-09-29T21:31:07.6561548Z   run `npm fund` for details
2025-09-29T21:31:07.8297599Z 
2025-09-29T21:31:07.8298360Z > yoohooguru-backend@1.0.0 pretest
2025-09-29T21:31:07.8299028Z > node ../scripts/generate-cors-origins.js
2025-09-29T21:31:07.8299309Z 
2025-09-29T21:31:07.8561332Z 🛠️  CORS Origins Generator
2025-09-29T21:31:07.8564568Z ==========================
2025-09-29T21:31:07.8564924Z 
2025-09-29T21:31:07.8565347Z 🔍 Validating CORS origins:
2025-09-29T21:31:07.8566149Z    1. https://yoohoo.guru (HTTPS)
2025-09-29T21:31:07.8566748Z    2. https://www.yoohoo.guru (HTTPS)
2025-09-29T21:31:07.8567329Z    3. https://api.yoohoo.guru (HTTPS)
2025-09-29T21:31:07.8567909Z    4. https://*.yoohoo.guru (HTTPS, WILDCARD)
2025-09-29T21:31:07.8568513Z    5. https://*.vercel.app (HTTPS, WILDCARD)
2025-09-29T21:31:07.8568919Z 
2025-09-29T21:31:07.8572710Z ✅ CORS_ORIGIN_PRODUCTION is already up to date in .env.test
2025-09-29T21:31:07.8573170Z 
2025-09-29T21:31:07.8573828Z 💡 Note: https://api.yoohoo.guru is explicitly listed because wildcard
2025-09-29T21:31:07.8574742Z    CORS matching does not reliably cover subdomains in most middleware.
2025-09-29T21:31:07.8614182Z 
2025-09-29T21:31:07.8614567Z > yoohooguru-backend@1.0.0 test
2025-09-29T21:31:07.8615712Z > firebase emulators:exec --project=demo-yoohooguru-test --only firestore,auth 'npx jest --forceExit --runInBand --detectOpenHandles --verbose'
2025-09-29T21:31:07.8616225Z 
2025-09-29T21:31:09.4252986Z [33m[1m⚠  emulators:[22m[39m You are not currently authenticated so some features may not work correctly. Please run [1mfirebase login[22m to authenticate the CLI.
2025-09-29T21:31:10.6466165Z [36m[1mi  emulators:[22m[39m Starting emulators: auth, firestore
2025-09-29T21:31:10.6468324Z [36m[1mi  emulators:[22m[39m Detected demo project ID "demo-yoohooguru-test", emulated services will use a demo configuration and attempts to access non-emulated services for this project will fail.
2025-09-29T21:31:10.6576637Z [33m[1m⚠ [22m[39m It appears you are running in a CI environment. You can avoid downloading the Firestore Emulator repeatedly by caching the /home/runner/.cache/firebase/emulators directory.
2025-09-29T21:31:10.6578570Z [36m[1mi  firestore:[22m[39m downloading cloud-firestore-emulator-v1.19.8.jar...
2025-09-29T21:31:11.4129686Z 
2025-09-29T21:31:11.6183940Z [36m[1mi  firestore:[22m[39m Firestore Emulator logging to [1mfirestore-debug.log[22m
2025-09-29T21:31:14.0314042Z [32m[1m✔  firestore:[22m[39m Firestore Emulator UI websocket is running on 9150.
2025-09-29T21:31:19.7283389Z [36m[1mi [22m[39m Running script: [1mnpx jest --forceExit --runInBand --detectOpenHandles --verbose[22m
2025-09-29T21:31:22.5388848Z   console.log
2025-09-29T21:31:22.5389545Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:22.5390635Z 
2025-09-29T21:31:22.5390818Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:22.5391064Z 
2025-09-29T21:31:22.5938250Z   console.log
2025-09-29T21:31:22.5938911Z     Real Firebase initialized for angels jobs tests
2025-09-29T21:31:22.5939333Z 
2025-09-29T21:31:22.5939571Z       at Object.log (tests/angels-jobs.test.js:43:13)
2025-09-29T21:31:22.5940173Z 
2025-09-29T21:31:26.3458561Z   console.log
2025-09-29T21:31:26.3459327Z     🧹 Test cleanup completed
2025-09-29T21:31:26.3459619Z 
2025-09-29T21:31:26.3460122Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:26.3460471Z 
2025-09-29T21:31:26.4016051Z FAIL tests/angels-jobs.test.js (5.877 s)
2025-09-29T21:31:26.4017539Z   Angels Jobs API
2025-09-29T21:31:26.4018010Z     POST /api/angels/jobs
2025-09-29T21:31:26.4020419Z       ✕ should create a new angel job posting (1333 ms)
2025-09-29T21:31:26.4021310Z       ✓ should return 400 for missing required fields (15 ms)
2025-09-29T21:31:26.4021855Z     GET /api/angels/jobs
2025-09-29T21:31:26.4022596Z       ✕ should return filtered list of angel jobs (133 ms)
2025-09-29T21:31:26.4023404Z       ✕ should support search functionality (30 ms)
2025-09-29T21:31:26.4023986Z       ✕ should sort featured jobs to the top (34 ms)
2025-09-29T21:31:26.4024380Z     GET /api/angels/jobs/:jobId
2025-09-29T21:31:26.4024883Z       ✕ should return job details with poster information (34 ms)
2025-09-29T21:31:26.4025433Z       ✓ should return 404 for non-existent job (28 ms)
2025-09-29T21:31:26.4025843Z     POST /api/angels/jobs/:jobId/apply
2025-09-29T21:31:26.4026298Z       ✕ should allow user to apply to a job (25 ms)
2025-09-29T21:31:26.4028558Z       ✕ should prevent user from applying to their own job (26 ms)
2025-09-29T21:31:26.4029308Z       ✕ should prevent duplicate applications (26 ms)
2025-09-29T21:31:26.4030016Z     GET /api/angels/my-activity
2025-09-29T21:31:26.4030730Z       ✓ should return user activity summary (61 ms)
2025-09-29T21:31:26.4031104Z 
2025-09-29T21:31:26.4031699Z   ● Angels Jobs API › POST /api/angels/jobs › should create a new angel job posting
2025-09-29T21:31:26.4032216Z 
2025-09-29T21:31:26.4032512Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-09-29T21:31:26.4032888Z 
2025-09-29T21:31:26.4033962Z     Expected: ObjectContaining {"description": "Need help moving furniture to new apartment", "featured": true, "postedBy": "test-user-123", "status": "open", "title": "Help with Moving"}
2025-09-29T21:31:26.4034971Z 
2025-09-29T21:31:26.4035120Z     Number of calls: 0
2025-09-29T21:31:26.4035330Z 
2025-09-29T21:31:26.4036338Z     [0m [90m 109 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjob[33m.[39mpostedBy)[33m.[39mtoBe([32m'test-user-123'[39m)[33m;[39m
2025-09-29T21:31:26.4037754Z      [90m 110 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjob[33m.[39mstatus)[33m.[39mtoBe([32m'open'[39m)[33m;[39m
2025-09-29T21:31:26.4038540Z     [31m[1m>[22m[39m[90m 111 |[39m       expect(mockJobRef[33m.[39m[36mset[39m)[33m.[39mtoHaveBeenCalledWith(
2025-09-29T21:31:26.4039070Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-09-29T21:31:26.4039495Z      [90m 112 |[39m         expect[33m.[39mobjectContaining({
2025-09-29T21:31:26.4040236Z      [90m 113 |[39m           title[33m:[39m jobData[33m.[39mtitle[33m,[39m
2025-09-29T21:31:26.4040788Z      [90m 114 |[39m           description[33m:[39m jobData[33m.[39mdescription[33m,[39m[0m
2025-09-29T21:31:26.4041072Z 
2025-09-29T21:31:26.4041294Z       at Object.toHaveBeenCalledWith (tests/angels-jobs.test.js:111:30)
2025-09-29T21:31:26.4041560Z 
2025-09-29T21:31:26.4042234Z   ● Angels Jobs API › GET /api/angels/jobs › should return filtered list of angel jobs
2025-09-29T21:31:26.4042543Z 
2025-09-29T21:31:26.4042680Z     expect(received).toHaveLength(expected)
2025-09-29T21:31:26.4042859Z 
2025-09-29T21:31:26.4042942Z     Expected length: 1
2025-09-29T21:31:26.4043152Z     Received length: 0
2025-09-29T21:31:26.4043538Z     Received array:  []
2025-09-29T21:31:26.4043663Z 
2025-09-29T21:31:26.4043780Z     [0m [90m 196 |[39m
2025-09-29T21:31:26.4044304Z      [90m 197 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:26.4045113Z     [31m[1m>[22m[39m[90m 198 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
2025-09-29T21:31:26.4045714Z      [90m     |[39m                                       [31m[1m^[22m[39m
2025-09-29T21:31:26.4046446Z      [90m 199 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs[[35m0[39m][33m.[39mcategory)[33m.[39mtoBe([32m'home'[39m)[33m;[39m
2025-09-29T21:31:26.4047348Z      [90m 200 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mpagination[33m.[39mtotal)[33m.[39mtoBe([35m1[39m)[33m;[39m
2025-09-29T21:31:26.4047885Z      [90m 201 |[39m       [0m
2025-09-29T21:31:26.4048044Z 
2025-09-29T21:31:26.4048228Z       at Object.toHaveLength (tests/angels-jobs.test.js:198:39)
2025-09-29T21:31:26.4048464Z 
2025-09-29T21:31:26.4048759Z   ● Angels Jobs API › GET /api/angels/jobs › should support search functionality
2025-09-29T21:31:26.4049034Z 
2025-09-29T21:31:26.4049164Z     expect(received).toHaveLength(expected)
2025-09-29T21:31:26.4049343Z 
2025-09-29T21:31:26.4049425Z     Expected length: 1
2025-09-29T21:31:26.4049633Z     Received length: 0
2025-09-29T21:31:26.4050057Z     Received array:  []
2025-09-29T21:31:26.4050193Z 
2025-09-29T21:31:26.4050311Z     [0m [90m 255 |[39m
2025-09-29T21:31:26.4050837Z      [90m 256 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:26.4051646Z     [31m[1m>[22m[39m[90m 257 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
2025-09-29T21:31:26.4052241Z      [90m     |[39m                                       [31m[1m^[22m[39m
2025-09-29T21:31:26.4052996Z      [90m 258 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs[[35m0[39m][33m.[39mtitle)[33m.[39mtoContain([32m'Handyman'[39m)[33m;[39m
2025-09-29T21:31:26.4053543Z      [90m 259 |[39m       
2025-09-29T21:31:26.4053900Z      [90m 260 |[39m       [90m// Restore original function[39m[0m
2025-09-29T21:31:26.4054120Z 
2025-09-29T21:31:26.4054301Z       at Object.toHaveLength (tests/angels-jobs.test.js:257:39)
2025-09-29T21:31:26.4054530Z 
2025-09-29T21:31:26.4054825Z   ● Angels Jobs API › GET /api/angels/jobs › should sort featured jobs to the top
2025-09-29T21:31:26.4055103Z 
2025-09-29T21:31:26.4055232Z     expect(received).toHaveLength(expected)
2025-09-29T21:31:26.4055417Z 
2025-09-29T21:31:26.4055500Z     Expected length: 3
2025-09-29T21:31:26.4055707Z     Received length: 1
2025-09-29T21:31:26.4057389Z     Received array:  [{"applicationCount": 0, "applications": {}, "category": "moving", "createdAt": "2025-09-29T21:31:22.656Z", "description": "Need help moving furniture to new apartment", "estimatedHours": 4, "featured": true, "hourlyRate": 25, "id": "dwXUx9LOBiMbAHJNRXdG", "location": {"city": "Denver", "state": "CO"}, "postedBy": "test-user-123", "skills": ["Heavy Lifting", "Furniture Moving"], "status": "open", "title": "Help with Moving", "updatedAt": "2025-09-29T21:31:22.656Z", "urgency": "normal"}]
2025-09-29T21:31:26.4058808Z 
2025-09-29T21:31:26.4058926Z     [0m [90m 325 |[39m
2025-09-29T21:31:26.4059443Z      [90m 326 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:26.4060649Z     [31m[1m>[22m[39m[90m 327 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m
2025-09-29T21:31:26.4061279Z      [90m     |[39m                                       [31m[1m^[22m[39m
2025-09-29T21:31:26.4061601Z      [90m 328 |[39m       
2025-09-29T21:31:26.4062192Z      [90m 329 |[39m       [90m// Featured job should be first, regardless of creation date[39m
2025-09-29T21:31:26.4063022Z      [90m 330 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs[[35m0[39m][33m.[39mtitle)[33m.[39mtoBe([32m'Featured Job'[39m)[33m;[39m[0m
2025-09-29T21:31:26.4063461Z 
2025-09-29T21:31:26.4063651Z       at Object.toHaveLength (tests/angels-jobs.test.js:327:39)
2025-09-29T21:31:26.4063882Z 
2025-09-29T21:31:26.4064262Z   ● Angels Jobs API › GET /api/angels/jobs/:jobId › should return job details with poster information
2025-09-29T21:31:26.4064600Z 
2025-09-29T21:31:26.4064729Z     expected 200 "OK", got 404 "Not Found"
2025-09-29T21:31:26.4064903Z 
2025-09-29T21:31:26.4065214Z     [0m [90m 391 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
2025-09-29T21:31:26.4065753Z      [90m 392 |[39m         [33m.[39m[36mget[39m([32m'/api/angels/jobs/job-123'[39m)
2025-09-29T21:31:26.4066264Z     [31m[1m>[22m[39m[90m 393 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
2025-09-29T21:31:26.4066666Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:31:26.4066939Z      [90m 394 |[39m
2025-09-29T21:31:26.4067438Z      [90m 395 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:26.4068269Z      [90m 396 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjob[33m.[39mtitle)[33m.[39mtoBe(mockJob[33m.[39mtitle)[33m;[39m[0m
2025-09-29T21:31:26.4068683Z 
2025-09-29T21:31:26.4068852Z       at Object.expect (tests/angels-jobs.test.js:393:10)
2025-09-29T21:31:26.4069147Z       ----
2025-09-29T21:31:26.4069463Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:31:26.4070061Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:31:26.4070463Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:31:26.4070900Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:31:26.4071327Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:31:26.4071577Z 
2025-09-29T21:31:26.4071935Z   ● Angels Jobs API › POST /api/angels/jobs/:jobId/apply › should allow user to apply to a job
2025-09-29T21:31:26.4072255Z 
2025-09-29T21:31:26.4072374Z     expected 200 "OK", got 404 "Not Found"
2025-09-29T21:31:26.4072539Z 
2025-09-29T21:31:26.4072827Z     [0m [90m 482 |[39m         [33m.[39mpost([32m'/api/angels/jobs/job-123/apply'[39m)
2025-09-29T21:31:26.4073278Z      [90m 483 |[39m         [33m.[39msend(applicationData)
2025-09-29T21:31:26.4073743Z     [31m[1m>[22m[39m[90m 484 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
2025-09-29T21:31:26.4074140Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:31:26.4074411Z      [90m 485 |[39m
2025-09-29T21:31:26.4074907Z      [90m 486 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:26.4075820Z      [90m 487 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mapplication[33m.[39mapplicantId)[33m.[39mtoBe([32m'test-user-123'[39m)[33m;[39m[0m
2025-09-29T21:31:26.4076284Z 
2025-09-29T21:31:26.4076443Z       at Object.expect (tests/angels-jobs.test.js:484:10)
2025-09-29T21:31:26.4076729Z       ----
2025-09-29T21:31:26.4077026Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:31:26.4077403Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:31:26.4077938Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:31:26.4078371Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:31:26.4078792Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:31:26.4079043Z 
2025-09-29T21:31:26.4079449Z   ● Angels Jobs API › POST /api/angels/jobs/:jobId/apply › should prevent user from applying to their own job
2025-09-29T21:31:26.4080193Z 
2025-09-29T21:31:26.4080344Z     expected 400 "Bad Request", got 404 "Not Found"
2025-09-29T21:31:26.4080538Z 
2025-09-29T21:31:26.4080842Z     [0m [90m 525 |[39m         [33m.[39mpost([32m'/api/angels/jobs/job-123/apply'[39m)
2025-09-29T21:31:26.4081380Z      [90m 526 |[39m         [33m.[39msend({ message[33m:[39m [32m'I want to apply'[39m })
2025-09-29T21:31:26.4081905Z     [31m[1m>[22m[39m[90m 527 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
2025-09-29T21:31:26.4082308Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:31:26.4082594Z      [90m 528 |[39m
2025-09-29T21:31:26.4083101Z      [90m 529 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-09-29T21:31:26.4083992Z      [90m 530 |[39m       expect(response[33m.[39mbody[33m.[39merror[33m.[39mmessage)[33m.[39mtoBe([32m'Cannot apply to your own job posting'[39m)[33m;[39m[0m
2025-09-29T21:31:26.4084457Z 
2025-09-29T21:31:26.4084621Z       at Object.expect (tests/angels-jobs.test.js:527:10)
2025-09-29T21:31:26.4084910Z       ----
2025-09-29T21:31:26.4085212Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:31:26.4085594Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:31:26.4085990Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:31:26.4086429Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:31:26.4086860Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:31:26.4087116Z 
2025-09-29T21:31:26.4087477Z   ● Angels Jobs API › POST /api/angels/jobs/:jobId/apply › should prevent duplicate applications
2025-09-29T21:31:26.4087801Z 
2025-09-29T21:31:26.4087948Z     expected 400 "Bad Request", got 404 "Not Found"
2025-09-29T21:31:26.4088136Z 
2025-09-29T21:31:26.4088419Z     [0m [90m 567 |[39m         [33m.[39mpost([32m'/api/angels/jobs/job-123/apply'[39m)
2025-09-29T21:31:26.4088985Z      [90m 568 |[39m         [33m.[39msend({ message[33m:[39m [32m'I want to apply again'[39m })
2025-09-29T21:31:26.4089525Z     [31m[1m>[22m[39m[90m 569 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
2025-09-29T21:31:26.4090211Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:31:26.4090495Z      [90m 570 |[39m
2025-09-29T21:31:26.4091007Z      [90m 571 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-09-29T21:31:26.4091914Z      [90m 572 |[39m       expect(response[33m.[39mbody[33m.[39merror[33m.[39mmessage)[33m.[39mtoBe([32m'You have already applied to this job'[39m)[33m;[39m[0m
2025-09-29T21:31:26.4092373Z 
2025-09-29T21:31:26.4092535Z       at Object.expect (tests/angels-jobs.test.js:569:10)
2025-09-29T21:31:26.4092821Z       ----
2025-09-29T21:31:26.4093123Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:31:26.4093509Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:31:26.4093910Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:31:26.4094342Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:31:26.4094761Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:31:26.4095016Z 
2025-09-29T21:31:26.7678268Z   console.log
2025-09-29T21:31:26.7679115Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:26.7679479Z 
2025-09-29T21:31:26.7680315Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:26.7680693Z 
2025-09-29T21:31:26.7702497Z 2025-09-29 21:31:26 [[33mwarn[39m]: [33m⚠️  DEPRECATION WARNING: getDatabase() is deprecated. Use getFirestore() instead.[39m
2025-09-29T21:31:26.7762751Z   console.warn
2025-09-29T21:31:26.7764132Z     Firebase connection warning: Firebase Realtime Database is not configured for this application. The application is initialized for Firestore. Use getFirestore() instead.
2025-09-29T21:31:26.7765224Z 
2025-09-29T21:31:26.7765893Z     [0m [90m 14 |[39m     console[33m.[39mlog([32m'Real Firebase initialized for AI skill matching tests'[39m)[33m;[39m
2025-09-29T21:31:26.7766578Z      [90m 15 |[39m   } [36mcatch[39m (error) {
2025-09-29T21:31:26.7767396Z     [31m[1m>[22m[39m[90m 16 |[39m     console[33m.[39mwarn([32m'Firebase connection warning:'[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
2025-09-29T21:31:26.7768006Z      [90m    |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:26.7768492Z      [90m 17 |[39m     firebaseInitialized [33m=[39m [36mfalse[39m[33m;[39m
2025-09-29T21:31:26.7768874Z      [90m 18 |[39m   }
2025-09-29T21:31:26.7769146Z      [90m 19 |[39m })[33m;[39m[0m
2025-09-29T21:31:26.7769311Z 
2025-09-29T21:31:26.7769518Z       at Object.warn (tests/ai-skill-matching.test.js:16:13)
2025-09-29T21:31:26.7769897Z 
2025-09-29T21:31:26.7824244Z   console.log
2025-09-29T21:31:26.7825303Z     ⏭️ Skipping test - Firebase not initialized in test environment
2025-09-29T21:31:26.7825933Z 
2025-09-29T21:31:26.7826402Z       at Object.log (tests/ai-skill-matching.test.js:45:17)
2025-09-29T21:31:26.7827876Z 
2025-09-29T21:31:26.7841940Z   console.log
2025-09-29T21:31:26.7843006Z     ⏭️ Skipping test - Firebase not initialized in test environment
2025-09-29T21:31:26.7843459Z 
2025-09-29T21:31:26.7843800Z       at Object.log (tests/ai-skill-matching.test.js:102:17)
2025-09-29T21:31:26.7844226Z 
2025-09-29T21:31:26.7858868Z   console.log
2025-09-29T21:31:26.7859700Z     ⏭️ Skipping test - Firebase not initialized in test environment
2025-09-29T21:31:26.7860378Z 
2025-09-29T21:31:26.7860721Z       at Object.log (tests/ai-skill-matching.test.js:126:17)
2025-09-29T21:31:26.7861127Z 
2025-09-29T21:31:26.7874580Z   console.log
2025-09-29T21:31:26.7875377Z     ⏭️ Skipping test - Firebase not initialized in test environment
2025-09-29T21:31:26.7875868Z 
2025-09-29T21:31:26.7876204Z       at Object.log (tests/ai-skill-matching.test.js:180:15)
2025-09-29T21:31:26.7876621Z 
2025-09-29T21:31:26.7890371Z   console.log
2025-09-29T21:31:26.7891106Z     ⏭️ Skipping test - Firebase not initialized in test environment
2025-09-29T21:31:26.7891556Z 
2025-09-29T21:31:26.7891890Z       at Object.log (tests/ai-skill-matching.test.js:240:15)
2025-09-29T21:31:26.7892319Z 
2025-09-29T21:31:28.7899432Z   console.log
2025-09-29T21:31:28.7900642Z     🧹 Test cleanup completed
2025-09-29T21:31:28.7900962Z 
2025-09-29T21:31:28.7901237Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:28.7901677Z 
2025-09-29T21:31:28.7915666Z PASS tests/ai-skill-matching.test.js
2025-09-29T21:31:28.7916198Z   Skills AI Matching Routes
2025-09-29T21:31:28.7916647Z     GET /api/skills/matches/:userId
2025-09-29T21:31:28.7917413Z       ✓ should return AI skill matches for a user (6 ms)
2025-09-29T21:31:28.7918160Z       ✓ should return 404 for non-existent user (2 ms)
2025-09-29T21:31:28.7918749Z     GET /api/skills/exchange-pairs
2025-09-29T21:31:28.7919412Z       ✓ should return optimal skill exchange pairs (1 ms)
2025-09-29T21:31:28.7920148Z   AI Skill Matching Algorithm
2025-09-29T21:31:28.7920895Z     ✓ should calculate higher scores for direct skill matches (1 ms)
2025-09-29T21:31:28.7921793Z     ✓ should calculate lower scores for category matches only (1 ms)
2025-09-29T21:31:28.7922225Z 
2025-09-29T21:31:28.8738092Z 2025-09-29 21:31:28 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:28.8748430Z 2025-09-29 21:31:28 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:28.8758069Z 2025-09-29 21:31:28 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:28.8766165Z   console.log
2025-09-29T21:31:28.8766811Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:28.8767163Z 
2025-09-29T21:31:28.8767420Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:28.8768114Z 
2025-09-29T21:31:30.9051245Z   console.log
2025-09-29T21:31:30.9052100Z     🧹 Test cleanup completed
2025-09-29T21:31:30.9052365Z 
2025-09-29T21:31:30.9052580Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:30.9052879Z 
2025-09-29T21:31:30.9069091Z PASS src/utils/skillCategorization.test.js
2025-09-29T21:31:30.9070006Z   Skill Categorization and Risk Assessment
2025-09-29T21:31:30.9070384Z     categorizeSkill
2025-09-29T21:31:30.9070949Z       ✓ should categorize creative skills correctly (2 ms)
2025-09-29T21:31:30.9071816Z       ✓ should categorize technical skills correctly (1 ms)
2025-09-29T21:31:30.9072695Z       ✓ should categorize fitness skills correctly (1 ms)
2025-09-29T21:31:30.9073507Z       ✓ should categorize martial arts correctly (2 ms)
2025-09-29T21:31:30.9074268Z       ✓ should categorize electrical work correctly
2025-09-29T21:31:30.9075040Z       ✓ should categorize woodworking correctly (1 ms)
2025-09-29T21:31:30.9075584Z       ✓ should return "Other" for unrecognized skills (1 ms)
2025-09-29T21:31:30.9076070Z       ✓ should handle edge cases (1 ms)
2025-09-29T21:31:30.9076399Z     getSkillRiskLevel
2025-09-29T21:31:30.9076801Z       ✓ should return low risk for creative skills (1 ms)
2025-09-29T21:31:30.9077332Z       ✓ should return medium risk for fitness skills (1 ms)
2025-09-29T21:31:30.9077863Z       ✓ should return high risk for martial arts (1 ms)
2025-09-29T21:31:30.9078371Z       ✓ should return high risk for electrical work (1 ms)
2025-09-29T21:31:30.9078852Z       ✓ should return high risk for woodworking
2025-09-29T21:31:30.9079339Z       ✓ should return low risk for unknown skills (1 ms)
2025-09-29T21:31:30.9079718Z     requiresLiabilityWaiver
2025-09-29T21:31:30.9080346Z       ✓ should require waiver for high-risk activities (1 ms)
2025-09-29T21:31:30.9080921Z       ✓ should not require waiver for low-risk activities (1 ms)
2025-09-29T21:31:30.9081481Z       ✓ should not require waiver for medium-risk activities
2025-09-29T21:31:30.9081882Z     getCategoryMetadata
2025-09-29T21:31:30.9082304Z       ✓ should return metadata for valid categories (2 ms)
2025-09-29T21:31:30.9082807Z       ✓ should return null for invalid categories (1 ms)
2025-09-29T21:31:30.9083167Z     getSkillCategories
2025-09-29T21:31:30.9083554Z       ✓ should return all categories including Other
2025-09-29T21:31:30.9083923Z     getCategoriesByRiskLevel
2025-09-29T21:31:30.9084375Z       ✓ should return correct categories for each risk level
2025-09-29T21:31:30.9084753Z     getHighRiskCategories
2025-09-29T21:31:30.9085180Z       ✓ should return all high and extreme risk categories
2025-09-29T21:31:30.9085538Z     Integration with missing categories from issue
2025-09-29T21:31:30.9086029Z       ✓ should properly handle all missing categories mentioned in issue (1 ms)
2025-09-29T21:31:30.9086592Z       ✓ should provide appropriate risk levels for missing categories (1 ms)
2025-09-29T21:31:30.9086860Z 
2025-09-29T21:31:31.0442638Z 2025-09-29 21:31:31 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:31.0453976Z 2025-09-29 21:31:31 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:31.0462370Z 2025-09-29 21:31:31 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:31.0470382Z   console.log
2025-09-29T21:31:31.0471057Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:31.0471416Z 
2025-09-29T21:31:31.0471655Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:31.0471973Z 
2025-09-29T21:31:33.1188558Z   console.log
2025-09-29T21:31:33.1189374Z     🧹 Test cleanup completed
2025-09-29T21:31:33.1190078Z 
2025-09-29T21:31:33.1190852Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:33.1191264Z 
2025-09-29T21:31:33.1205280Z PASS tests/account-recovery.test.js
2025-09-29T21:31:33.1205920Z   Account Recovery and Management
2025-09-29T21:31:33.1206504Z     Profile Visibility
2025-09-29T21:31:33.1207254Z       ✓ should allow hiding user profile (18 ms)
2025-09-29T21:31:33.1208407Z       ✓ should allow showing user profile (8 ms)
2025-09-29T21:31:33.1209223Z       ✓ should reject invalid visibility value (9 ms)
2025-09-29T21:31:33.1210031Z     Account Deletion
2025-09-29T21:31:33.1210871Z       ✓ should schedule account deletion with email confirmation (7 ms)
2025-09-29T21:31:33.1211915Z       ✓ should reject deletion without email confirmation (7 ms)
2025-09-29T21:31:33.1212793Z       ✓ should reject deletion without email (8 ms)
2025-09-29T21:31:33.1213382Z     Account Restoration
2025-09-29T21:31:33.1214021Z       ✓ should restore deleted account (7 ms)
2025-09-29T21:31:33.1214763Z       ✓ should reject restoration when no deletion request exists (7 ms)
2025-09-29T21:31:33.1215235Z     Account Merging
2025-09-29T21:31:33.1215694Z       ○ skipped should create merge request for valid email
2025-09-29T21:31:33.1216326Z       ○ skipped should reject merge with non-existent email
2025-09-29T21:31:33.1216822Z       ○ skipped should reject merge with same account
2025-09-29T21:31:33.1217297Z       ○ skipped should reject invalid provider
2025-09-29T21:31:33.1217538Z 
2025-09-29T21:31:33.2295198Z 2025-09-29 21:31:33 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:33.2305975Z 2025-09-29 21:31:33 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:33.2314260Z 2025-09-29 21:31:33 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:33.2322262Z   console.log
2025-09-29T21:31:33.2322965Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:33.2323347Z 
2025-09-29T21:31:33.2323592Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:33.2323969Z 
2025-09-29T21:31:33.2565196Z 2025-09-29 21:31:33 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_PROJECT_ID, FIREBASE_API_KEY[39m
2025-09-29T21:31:35.2695107Z   console.log
2025-09-29T21:31:35.2695977Z     🧹 Test cleanup completed
2025-09-29T21:31:35.2696400Z 
2025-09-29T21:31:35.2696688Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:35.2697030Z 
2025-09-29T21:31:35.2711661Z PASS tests/secrets-integration.test.js
2025-09-29T21:31:35.2712200Z   Secrets Integration Tests
2025-09-29T21:31:35.2712688Z     Complete Stripe Configuration
2025-09-29T21:31:35.2713642Z       ✓ should properly configure all Stripe secrets mentioned in the issue (2 ms)
2025-09-29T21:31:35.2714637Z       ✓ should expose payment configuration via API endpoint (10 ms)
2025-09-29T21:31:35.2715483Z       ✓ should handle webhook configuration correctly (1 ms)
2025-09-29T21:31:35.2716076Z     Google OAuth Configuration
2025-09-29T21:31:35.2716765Z       ✓ should properly configure Google OAuth secrets (4 ms)
2025-09-29T21:31:35.2717665Z       ✓ should handle missing Google OAuth configuration gracefully (1 ms)
2025-09-29T21:31:35.2718350Z     Production Environment Validation
2025-09-29T21:31:35.2719034Z       ✓ should validate required secrets in production mode (1 ms)
2025-09-29T21:31:35.2719700Z       ✓ should fail validation when required secrets are missing in production (14 ms)
2025-09-29T21:31:35.2720274Z 
2025-09-29T21:31:35.3754928Z 2025-09-29 21:31:35 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:35.3764692Z 2025-09-29 21:31:35 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:35.3772988Z 2025-09-29 21:31:35 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:35.3780004Z   console.log
2025-09-29T21:31:35.3780551Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:35.3780876Z 
2025-09-29T21:31:35.3781084Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:35.3781620Z 
2025-09-29T21:31:37.4185248Z   console.log
2025-09-29T21:31:37.4185955Z     🧹 Test cleanup completed
2025-09-29T21:31:37.4186221Z 
2025-09-29T21:31:37.4186432Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:37.4186724Z 
2025-09-29T21:31:37.4201237Z PASS tests/curationAgents.test.js
2025-09-29T21:31:37.4202249Z   Curation Agents Error Handling
2025-09-29T21:31:37.4202580Z     startCurationAgents()
2025-09-29T21:31:37.4203312Z       ✓ should start agents successfully when all dependencies are available (2 ms)
2025-09-29T21:31:37.4204116Z       ✓ should handle disabled agents gracefully (1 ms)
2025-09-29T21:31:37.4204850Z       ✓ should log detailed errors when Firebase is not available (25 ms)
2025-09-29T21:31:37.4206053Z       ✓ should log detailed errors when subdomains are not configured (1 ms)
2025-09-29T21:31:37.4207096Z       ✓ should continue startup even when some agents fail (2 ms)
2025-09-29T21:31:37.4207783Z       ✓ should show development mode message in non-production environments (1 ms)
2025-09-29T21:31:37.4208246Z     getCurationAgentStatus()
2025-09-29T21:31:37.4208626Z       ✓ should return current agent status (1 ms)
2025-09-29T21:31:37.4209075Z       ✓ should include environment information (1 ms)
2025-09-29T21:31:37.4209465Z     Individual Agent Dependency Validation
2025-09-29T21:31:37.4210185Z       ✓ should validate NewsAgent dependencies correctly (1 ms)
2025-09-29T21:31:37.4210727Z       ✓ should validate BlogAgent dependencies correctly (1 ms)
2025-09-29T21:31:37.4211289Z       ✓ should throw detailed errors when Firebase is unavailable (1 ms)
2025-09-29T21:31:37.4211598Z 
2025-09-29T21:31:37.5227340Z 2025-09-29 21:31:37 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:37.5237958Z 2025-09-29 21:31:37 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:37.5246252Z 2025-09-29 21:31:37 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:37.5254521Z   console.log
2025-09-29T21:31:37.5255204Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:37.5255580Z 
2025-09-29T21:31:37.5255827Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:37.5256150Z 
2025-09-29T21:31:37.5390096Z 2025-09-29 21:31:37 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:37.5400343Z 2025-09-29 21:31:37 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:39.5531618Z   console.log
2025-09-29T21:31:39.5532266Z     🧹 Test cleanup completed
2025-09-29T21:31:39.5532504Z 
2025-09-29T21:31:39.5532707Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:39.5532984Z 
2025-09-29T21:31:39.5650291Z FAIL tests/cors-origin-sync.test.js
2025-09-29T21:31:39.5650892Z   Dynamic CORS Origin Sync
2025-09-29T21:31:39.5651288Z     fetchVercelDomains
2025-09-29T21:31:39.5652217Z       ✓ should return empty array when VERCEL_API_TOKEN is not set (2 ms)
2025-09-29T21:31:39.5653221Z       ✓ should fetch verified domains when VERCEL_API_TOKEN is set (2 ms)
2025-09-29T21:31:39.5654008Z       ✓ should handle API errors gracefully (1 ms)
2025-09-29T21:31:39.5654501Z     getRailwayDomain
2025-09-29T21:31:39.5655057Z       ✓ should return the static Railway domain (1 ms)
2025-09-29T21:31:39.5655569Z     updateEnvFile
2025-09-29T21:31:39.5656406Z       ✓ should create new CORS_ORIGIN_PRODUCTION line if file exists but line does not (2 ms)
2025-09-29T21:31:39.5657373Z       ✓ should update existing CORS_ORIGIN_PRODUCTION line (1 ms)
2025-09-29T21:31:39.5657901Z     Integration
2025-09-29T21:31:39.5658563Z       ✕ should include api.yoohoo.guru in static origins (6 ms)
2025-09-29T21:31:39.5658981Z 
2025-09-29T21:31:39.5659650Z   ● Dynamic CORS Origin Sync › Integration › should include api.yoohoo.guru in static origins
2025-09-29T21:31:39.5660469Z 
2025-09-29T21:31:39.5660868Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:39.5661348Z 
2025-09-29T21:31:39.5755091Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:39.5757279Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:39.5759232Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:39.5761151Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:39.5761796Z      [90m 121 |[39m     }
2025-09-29T21:31:39.5762259Z      [90m 122 |[39m   }
2025-09-29T21:31:39.5762672Z      [90m 123 |[39m[0m
2025-09-29T21:31:39.5762897Z 
2025-09-29T21:31:39.5763177Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:39.5763883Z       at Object.getConfig (tests/cors-origin-sync.test.js:191:24)
2025-09-29T21:31:39.5764315Z 
2025-09-29T21:31:39.6363132Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:39.6370503Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:39.6377510Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:39.6384347Z   console.log
2025-09-29T21:31:39.6384909Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:39.6385211Z 
2025-09-29T21:31:39.6385353Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:39.6385544Z 
2025-09-29T21:31:39.6413689Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mFirebase Admin SDK initialized successfully[39m
2025-09-29T21:31:39.6421401Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-29T21:31:39.6429233Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🛠️  Running with development Firebase configuration[39m
2025-09-29T21:31:39.6452139Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mFirebase Admin SDK initialized successfully[39m
2025-09-29T21:31:39.6459748Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-29T21:31:39.6468622Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🛠️  Running with development Firebase configuration[39m
2025-09-29T21:31:39.6563243Z 2025-09-29 21:31:39 [[31merror[39m]: Error: Firebase project ID "demo-project" contains prohibited pattern for production environment. Production and staging must use live Firebase projects only.
2025-09-29T21:31:39.6566434Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:49:11)
2025-09-29T21:31:39.6568031Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6569666Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:50:20)
2025-09-29T21:31:39.6571413Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6572914Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6574429Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:50:42)
2025-09-29T21:31:39.6575965Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6576925Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6577914Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6579308Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6580929Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6582798Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6584386Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6585926Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6587655Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6589454Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6591788Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6593462Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6594856Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6600087Z 2025-09-29 21:31:39 [[31merror[39m]: Error: Firebase project ID "test-project" contains prohibited pattern for production environment. Production and staging must use live Firebase projects only.
2025-09-29T21:31:39.6602014Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:49:11)
2025-09-29T21:31:39.6603574Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6605158Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:61:20)
2025-09-29T21:31:39.6606728Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6608249Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6609746Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:61:42)
2025-09-29T21:31:39.6611404Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6612374Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6613350Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6614724Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6616005Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6617378Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6618883Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6620576Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6621902Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6623656Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6625384Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6626315Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6627531Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6628931Z 2025-09-29 21:31:39 [[31merror[39m]: Error: Firebase project ID "mock-project" contains prohibited pattern for production environment. Production and staging must use live Firebase projects only.
2025-09-29T21:31:39.6630464Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:49:11)
2025-09-29T21:31:39.6632273Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6633762Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:72:20)
2025-09-29T21:31:39.6635170Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6636656Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6638122Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:72:42)
2025-09-29T21:31:39.6639449Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6640616Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6641513Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6642814Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6644035Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6645290Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6646330Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6647148Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6647888Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6648849Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6650170Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6651386Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6652760Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6680798Z 2025-09-29 21:31:39 [[31merror[39m]: Error: Firebase emulator host is configured (localhost:9000) but NODE_ENV is production. Emulators are prohibited in production environments.
2025-09-29T21:31:39.6681829Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:24:11)
2025-09-29T21:31:39.6682708Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6683562Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:84:20)
2025-09-29T21:31:39.6684374Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6685201Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6686006Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:84:42)
2025-09-29T21:31:39.6687036Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6687580Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6688141Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6688908Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6689987Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6690805Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6691619Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6692419Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6693137Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6694090Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6695193Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6696063Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6696810Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6703378Z 2025-09-29 21:31:39 [[31merror[39m]: Error: USE_MOCKS is enabled (true) but NODE_ENV is production. Mocks are prohibited in production environments.
2025-09-29T21:31:39.6704275Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:31:11)
2025-09-29T21:31:39.6705138Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6705979Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:96:20)
2025-09-29T21:31:39.6706806Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6707632Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6708446Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:96:42)
2025-09-29T21:31:39.6709248Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6709991Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6710589Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6711352Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6712049Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6712817Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6713622Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6714421Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6715127Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6716265Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6717413Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6718436Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6719175Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6724093Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m✅ Firebase configuration validated for production environment[39m
2025-09-29T21:31:39.6732666Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🔥 Using Firebase project: yoohoo-prod[39m
2025-09-29T21:31:39.6741870Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mFirebase Admin SDK initialized successfully[39m
2025-09-29T21:31:39.6749719Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mEnvironment: production[39m
2025-09-29T21:31:39.6758547Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🚀 Running with live Firebase configuration (production-ready)[39m
2025-09-29T21:31:39.6766683Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🔥 Using Firebase project: yoohoo-prod[39m
2025-09-29T21:31:39.6774643Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m✅ Firestore-only configuration active[39m
2025-09-29T21:31:39.6797601Z 2025-09-29 21:31:39 [[31merror[39m]: Error: Firebase project ID is required in production environment
2025-09-29T21:31:39.6798737Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:40:11)
2025-09-29T21:31:39.6799751Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6801002Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:118:20)
2025-09-29T21:31:39.6802043Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6803074Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6804080Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:118:42)
2025-09-29T21:31:39.6805086Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6805743Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6806416Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6807355Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6808235Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6809161Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6810104Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6810909Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6811624Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6812573Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6813664Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6814729Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6815509Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6821118Z 2025-09-29 21:31:39 [[31merror[39m]: Error: Firebase project ID "Invalid_Project_ID" has invalid format. Project IDs must be lowercase alphanumeric with hyphens only.
2025-09-29T21:31:39.6822400Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:57:11)
2025-09-29T21:31:39.6823275Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6824117Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:129:20)
2025-09-29T21:31:39.6824926Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6825750Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6826555Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:129:42)
2025-09-29T21:31:39.6827354Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6827892Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6828428Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6829191Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6830053Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6830794Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6831616Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6832428Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6833145Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6834092Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6835190Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6836054Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6836788Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6843779Z 2025-09-29 21:31:39 [[31merror[39m]: Error: Firebase project ID "demo-project" contains prohibited pattern for staging environment. Production and staging must use live Firebase projects only.
2025-09-29T21:31:39.6844823Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:49:11)
2025-09-29T21:31:39.6845689Z     at validateProductionFirebaseConfig (/home/runner/work/yoohooguru/yoohooguru/backend/src/config/firebase.js:112:9)
2025-09-29T21:31:39.6846521Z     at initializeFirebase (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:142:20)
2025-09-29T21:31:39.6847342Z     at Object.<anonymous> (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/toThrowMatchers.js:74:11)
2025-09-29T21:31:39.6848177Z     at Object.throwingMatcher [as toThrow] (/home/runner/work/yoohooguru/yoohooguru/node_modules/expect/build/index.js:320:21)
2025-09-29T21:31:39.6849151Z     at Object.toThrow (/home/runner/work/yoohooguru/yoohooguru/backend/tests/firebase-validation.test.js:142:42)
2025-09-29T21:31:39.6850134Z     at Promise.then.completed (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:298:28)
2025-09-29T21:31:39.6850667Z     at new Promise (<anonymous>)
2025-09-29T21:31:39.6851341Z     at callAsyncCircusFn (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/utils.js:231:10)
2025-09-29T21:31:39.6852503Z     at _callCircusTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:316:40)
2025-09-29T21:31:39.6853643Z     at _runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:252:3)
2025-09-29T21:31:39.6854963Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:126:9)
2025-09-29T21:31:39.6856456Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6857940Z     at _runTestsForDescribeBlock (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:121:9)
2025-09-29T21:31:39.6859354Z     at run (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/run.js:71:3)
2025-09-29T21:31:39.6861042Z     at runAndTransformResultsToJestFormat (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-09-29T21:31:39.6862782Z     at jestAdapter (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-09-29T21:31:39.6864351Z     at runTestInternal (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:367:16)
2025-09-29T21:31:39.6865199Z     at runTest (/home/runner/work/yoohooguru/yoohooguru/node_modules/jest-runner/build/runTest.js:444:34)
2025-09-29T21:31:39.6886254Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m✅ Firebase configuration validated for staging environment[39m
2025-09-29T21:31:39.6894480Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🔥 Using Firebase project: yoohoo-staging[39m
2025-09-29T21:31:39.6904333Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mFirebase Admin SDK initialized successfully[39m
2025-09-29T21:31:39.6912190Z 2025-09-29 21:31:39 [[32minfo[39m]: [32mEnvironment: staging[39m
2025-09-29T21:31:39.6920078Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🚀 Running with live Firebase configuration (production-ready)[39m
2025-09-29T21:31:39.6927568Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m🔥 Using Firebase project: yoohoo-staging[39m
2025-09-29T21:31:39.6935492Z 2025-09-29 21:31:39 [[32minfo[39m]: [32m✅ Firestore-only configuration active[39m
2025-09-29T21:31:41.6952927Z   console.log
2025-09-29T21:31:41.6953649Z     🧹 Test cleanup completed
2025-09-29T21:31:41.6953997Z 
2025-09-29T21:31:41.6954494Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:41.6954860Z 
2025-09-29T21:31:41.6969349Z PASS tests/firebase-validation.test.js
2025-09-29T21:31:41.6970319Z   Firebase Production Validation
2025-09-29T21:31:41.6970837Z     Development Environment
2025-09-29T21:31:41.6971523Z       ✓ should allow Firebase initialization in development (5 ms)
2025-09-29T21:31:41.6972186Z       ✓ should allow demo values in development (4 ms)
2025-09-29T21:31:41.6972723Z     Production Environment
2025-09-29T21:31:41.6973258Z       ✓ should reject demo project IDs in production (10 ms)
2025-09-29T21:31:41.6973898Z       ✓ should reject test project IDs in production (3 ms)
2025-09-29T21:31:41.6974592Z       ✓ should reject mock project IDs in production (5 ms)
2025-09-29T21:31:41.6985298Z       ✓ should reject emulator host in production (3 ms)
2025-09-29T21:31:41.6986017Z       ✓ should reject USE_MOCKS=true in production (2 ms)
2025-09-29T21:31:41.6986578Z       ✓ should allow valid production configuration (7 ms)
2025-09-29T21:31:41.6987105Z       ✓ should require project ID in production (2 ms)
2025-09-29T21:31:41.6987887Z       ✓ should validate project ID format (2 ms)
2025-09-29T21:31:41.6988200Z     Staging Environment
2025-09-29T21:31:41.6988562Z       ✓ should apply same validation as production (5 ms)
2025-09-29T21:31:41.6988989Z       ✓ should allow valid staging configuration (7 ms)
2025-09-29T21:31:41.6989201Z 
2025-09-29T21:31:41.7678326Z 2025-09-29 21:31:41 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:41.7688113Z 2025-09-29 21:31:41 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:41.7695585Z 2025-09-29 21:31:41 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:41.7703254Z   console.log
2025-09-29T21:31:41.7703796Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:41.7704124Z 
2025-09-29T21:31:41.7704336Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:41.7704639Z 
2025-09-29T21:31:41.7731963Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.7739988Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.7865995Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.7874195Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.7896806Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.7905178Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.7930836Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.7939237Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.7990618Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.7998067Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.8017529Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.8025185Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.8042917Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.8050300Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.8068015Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.8075673Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.8092937Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.8100312Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.8118192Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.8125736Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:41.8143124Z 2025-09-29 21:31:41 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:41.8150659Z 2025-09-29 21:31:41 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:43.8227666Z   console.log
2025-09-29T21:31:43.8228440Z     🧹 Test cleanup completed
2025-09-29T21:31:43.8228752Z 
2025-09-29T21:31:43.8229011Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:43.8229373Z 
2025-09-29T21:31:43.8554396Z FAIL tests/cors-config.test.js
2025-09-29T21:31:43.8554928Z   CORS Configuration
2025-09-29T21:31:43.8555816Z     Production CORS Origins
2025-09-29T21:31:43.8556946Z       ✕ should use default production origins when CORS_ORIGIN_PRODUCTION is not set (4 ms)
2025-09-29T21:31:43.8558062Z       ✕ should use custom origins when CORS_ORIGIN_PRODUCTION is set (3 ms)
2025-09-29T21:31:43.8559022Z       ✕ should handle empty CORS_ORIGIN_PRODUCTION by using defaults (3 ms)
2025-09-29T21:31:43.8559678Z     CORS Origin Validation Function
2025-09-29T21:31:43.8560579Z       ✕ should allow exact origin matches (6 ms)
2025-09-29T21:31:43.8561334Z       ✕ should allow wildcard matches for vercel.app (2 ms)
2025-09-29T21:31:43.8562092Z       ✕ should allow api.yoohoo.guru explicitly (2 ms)
2025-09-29T21:31:43.8562851Z       ✕ should allow another wildcard match for vercel.app (2 ms)
2025-09-29T21:31:43.8563613Z       ✕ should block non-matching origins (3 ms)
2025-09-29T21:31:43.8564451Z       ✕ should allow requests with no origin (mobile apps, Postman) (2 ms)
2025-09-29T21:31:43.8565281Z       ✕ should allow requests with undefined origin (3 ms)
2025-09-29T21:31:43.8566091Z       ✕ should validate all required origins from issue spec (2 ms)
2025-09-29T21:31:43.8566657Z     Development CORS Origins
2025-09-29T21:31:43.8567254Z       ✓ should use default development origins (4 ms)
2025-09-29T21:31:43.8567919Z       ✓ should work with development origins (2 ms)
2025-09-29T21:31:43.8568258Z 
2025-09-29T21:31:43.8569210Z   ● CORS Configuration › Production CORS Origins › should use default production origins when CORS_ORIGIN_PRODUCTION is not set
2025-09-29T21:31:43.8570174Z 
2025-09-29T21:31:43.8570612Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8571143Z 
2025-09-29T21:31:43.8571753Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8573175Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8575082Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8576259Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8576792Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8577237Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8577652Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8577875Z 
2025-09-29T21:31:43.8578135Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8578783Z       at Object.getConfig (tests/cors-config.test.js:39:22)
2025-09-29T21:31:43.8579161Z 
2025-09-29T21:31:43.8580282Z   ● CORS Configuration › Production CORS Origins › should use custom origins when CORS_ORIGIN_PRODUCTION is set
2025-09-29T21:31:43.8580974Z 
2025-09-29T21:31:43.8581404Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8581881Z 
2025-09-29T21:31:43.8582486Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8583845Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8585656Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8586799Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8587298Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8587711Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8588368Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8588611Z 
2025-09-29T21:31:43.8588864Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8589527Z       at Object.getConfig (tests/cors-config.test.js:54:22)
2025-09-29T21:31:43.8590179Z 
2025-09-29T21:31:43.8591073Z   ● CORS Configuration › Production CORS Origins › should handle empty CORS_ORIGIN_PRODUCTION by using defaults
2025-09-29T21:31:43.8592049Z 
2025-09-29T21:31:43.8592478Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8593001Z 
2025-09-29T21:31:43.8593635Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8595050Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8596992Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8598217Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8598740Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8599180Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8599583Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8600062Z 
2025-09-29T21:31:43.8600357Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8601043Z       at Object.getConfig (tests/cors-config.test.js:66:22)
2025-09-29T21:31:43.8601433Z 
2025-09-29T21:31:43.8602123Z   ● CORS Configuration › CORS Origin Validation Function › should allow exact origin matches
2025-09-29T21:31:43.8602724Z 
2025-09-29T21:31:43.8603142Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8603638Z 
2025-09-29T21:31:43.8604287Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8605738Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8607663Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8608904Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8609483Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8610179Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8610634Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8610866Z 
2025-09-29T21:31:43.8611136Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8611807Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8612192Z 
2025-09-29T21:31:43.8612987Z   ● CORS Configuration › CORS Origin Validation Function › should allow wildcard matches for vercel.app
2025-09-29T21:31:43.8613655Z 
2025-09-29T21:31:43.8614107Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8614590Z 
2025-09-29T21:31:43.8615231Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8616665Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8618610Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8620057Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8620629Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8621086Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8621519Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8621751Z 
2025-09-29T21:31:43.8622019Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8622679Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8623302Z 
2025-09-29T21:31:43.8624099Z   ● CORS Configuration › CORS Origin Validation Function › should allow api.yoohoo.guru explicitly
2025-09-29T21:31:43.8624758Z 
2025-09-29T21:31:43.8625184Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8625672Z 
2025-09-29T21:31:43.8626562Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8628005Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8630103Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8631364Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8631913Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8632367Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8632834Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8633073Z 
2025-09-29T21:31:43.8633347Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8634011Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8634410Z 
2025-09-29T21:31:43.8635242Z   ● CORS Configuration › CORS Origin Validation Function › should allow another wildcard match for vercel.app
2025-09-29T21:31:43.8635948Z 
2025-09-29T21:31:43.8636379Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8636873Z 
2025-09-29T21:31:43.8637500Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8638945Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8641089Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8642348Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8642895Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8643335Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8643766Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8644015Z 
2025-09-29T21:31:43.8644282Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8645035Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8645438Z 
2025-09-29T21:31:43.8646179Z   ● CORS Configuration › CORS Origin Validation Function › should block non-matching origins
2025-09-29T21:31:43.8646782Z 
2025-09-29T21:31:43.8647198Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8647673Z 
2025-09-29T21:31:43.8648271Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8649718Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8651836Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8653107Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8653680Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8654128Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8654554Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8654784Z 
2025-09-29T21:31:43.8655057Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8655692Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8656073Z 
2025-09-29T21:31:43.8656980Z   ● CORS Configuration › CORS Origin Validation Function › should allow requests with no origin (mobile apps, Postman)
2025-09-29T21:31:43.8657722Z 
2025-09-29T21:31:43.8658376Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8658894Z 
2025-09-29T21:31:43.8659543Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8661190Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8663338Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8664571Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8665130Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8665590Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8666010Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8666235Z 
2025-09-29T21:31:43.8666497Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8667172Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8667575Z 
2025-09-29T21:31:43.8668371Z   ● CORS Configuration › CORS Origin Validation Function › should allow requests with undefined origin
2025-09-29T21:31:43.8669030Z 
2025-09-29T21:31:43.8669451Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8670179Z 
2025-09-29T21:31:43.8670823Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8672266Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8674259Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8675490Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8676072Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8676538Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8676989Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8677213Z 
2025-09-29T21:31:43.8677482Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8678140Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8678531Z 
2025-09-29T21:31:43.8679431Z   ● CORS Configuration › CORS Origin Validation Function › should validate all required origins from issue spec
2025-09-29T21:31:43.8680344Z 
2025-09-29T21:31:43.8680743Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:43.8681204Z 
2025-09-29T21:31:43.8681830Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:43.8683266Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8685173Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:43.8686394Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:43.8686958Z      [90m 121 |[39m     }
2025-09-29T21:31:43.8687406Z      [90m 122 |[39m   }
2025-09-29T21:31:43.8687838Z      [90m 123 |[39m[0m
2025-09-29T21:31:43.8688101Z 
2025-09-29T21:31:43.8688368Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:43.8689029Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:31:43.8689427Z 
2025-09-29T21:31:43.9862293Z 2025-09-29 21:31:43 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:43.9872203Z 2025-09-29 21:31:43 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:43.9879098Z 2025-09-29 21:31:43 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:43.9886346Z   console.log
2025-09-29T21:31:43.9887345Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:43.9887622Z 
2025-09-29T21:31:43.9985504Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:43.9985847Z 
2025-09-29T21:31:43.9986547Z 2025-09-29 21:31:43 [[32minfo[39m]: [32m📥 Webhook received - signature present: true, secret configured: true[39m
2025-09-29T21:31:43.9999443Z 2025-09-29 21:31:43 [[31merror[39m]: [31m❌ Webhook signature verification failed.[39m
2025-09-29T21:31:44.0146706Z 2025-09-29 21:31:44 [[32minfo[39m]: [32m📥 Webhook received - signature present: true, secret configured: true[39m
2025-09-29T21:31:44.0158720Z 2025-09-29 21:31:44 [[31merror[39m]: [31m❌ Webhook signature verification failed.[39m
2025-09-29T21:31:44.0273966Z 2025-09-29 21:31:44 [[32minfo[39m]: [32m📥 Webhook received - signature present: true, secret configured: true[39m
2025-09-29T21:31:44.0286615Z 2025-09-29 21:31:44 [[31merror[39m]: [31m❌ Webhook signature verification failed.[39m
2025-09-29T21:31:44.0369062Z 2025-09-29 21:31:44 [[32minfo[39m]: [32m📥 Webhook received - signature present: true, secret configured: true[39m
2025-09-29T21:31:44.0382060Z 2025-09-29 21:31:44 [[31merror[39m]: [31m❌ Webhook signature verification failed.[39m
2025-09-29T21:31:44.0474740Z 2025-09-29 21:31:44 [[32minfo[39m]: [32m📥 Webhook received - signature present: true, secret configured: true[39m
2025-09-29T21:31:44.0487520Z 2025-09-29 21:31:44 [[31merror[39m]: [31m❌ Webhook signature verification failed.[39m
2025-09-29T21:31:44.0571743Z 2025-09-29 21:31:44 [[32minfo[39m]: [32m📥 Webhook received - signature present: true, secret configured: true[39m
2025-09-29T21:31:44.0584560Z 2025-09-29 21:31:44 [[31merror[39m]: [31m❌ Webhook signature verification failed.[39m
2025-09-29T21:31:46.0629425Z   console.log
2025-09-29T21:31:46.0630600Z     🧹 Test cleanup completed
2025-09-29T21:31:46.0631057Z 
2025-09-29T21:31:46.0631376Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:46.0631843Z 
2025-09-29T21:31:46.0776251Z FAIL tests/webhooks.test.js
2025-09-29T21:31:46.0777090Z   Stripe Webhooks
2025-09-29T21:31:46.0777877Z     POST /api/webhooks/stripe
2025-09-29T21:31:46.0778979Z       ✕ should accept valid webhook with proper signature (17 ms)
2025-09-29T21:31:46.0781266Z       ✓ should reject webhook with invalid signature (10 ms)
2025-09-29T21:31:46.0782378Z       ✕ should process webhook successfully even when stripe key is missing in test env (12 ms)
2025-09-29T21:31:46.0783402Z       ✕ should handle payment_intent.succeeded event (9 ms)
2025-09-29T21:31:46.0784113Z       ✕ should handle subscription events (11 ms)
2025-09-29T21:31:46.0784814Z       ✕ should handle unknown event types gracefully (9 ms)
2025-09-29T21:31:46.0785176Z 
2025-09-29T21:31:46.0785872Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should accept valid webhook with proper signature
2025-09-29T21:31:46.0786484Z 
2025-09-29T21:31:46.0786773Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:31:46.0787220Z 
2025-09-29T21:31:46.0787372Z     Expected: 200
2025-09-29T21:31:46.0787698Z     Received: 400
2025-09-29T21:31:46.0787884Z 
2025-09-29T21:31:46.0788274Z     [0m [90m 51 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:31:46.0788809Z      [90m 52 |[39m
2025-09-29T21:31:46.0789694Z     [31m[1m>[22m[39m[90m 53 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:31:46.0790816Z      [90m    |[39m                               [31m[1m^[22m[39m
2025-09-29T21:31:46.0791862Z      [90m 54 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:46.0792910Z      [90m 55 |[39m       [90m// In test mode, may also include test_mode: true[39m
2025-09-29T21:31:46.0793588Z      [90m 56 |[39m     })[33m;[39m[0m
2025-09-29T21:31:46.0793873Z 
2025-09-29T21:31:46.0794135Z       at Object.toBe (tests/webhooks.test.js:53:31)
2025-09-29T21:31:46.0794490Z 
2025-09-29T21:31:46.0795849Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should process webhook successfully even when stripe key is missing in test env
2025-09-29T21:31:46.0796672Z 
2025-09-29T21:31:46.0796976Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:31:46.0797359Z 
2025-09-29T21:31:46.0797495Z     Expected: 200
2025-09-29T21:31:46.0797823Z     Received: 400
2025-09-29T21:31:46.0798242Z 
2025-09-29T21:31:46.0798649Z     [0m [90m 91 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:31:46.0799179Z      [90m 92 |[39m
2025-09-29T21:31:46.0800274Z     [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:31:46.0801199Z      [90m    |[39m                               [31m[1m^[22m[39m
2025-09-29T21:31:46.0802240Z      [90m 94 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:46.0803066Z      [90m 95 |[39m     })[33m;[39m
2025-09-29T21:31:46.0803531Z      [90m 96 |[39m[0m
2025-09-29T21:31:46.0803753Z 
2025-09-29T21:31:46.0804009Z       at Object.toBe (tests/webhooks.test.js:93:31)
2025-09-29T21:31:46.0804351Z 
2025-09-29T21:31:46.0805025Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should handle payment_intent.succeeded event
2025-09-29T21:31:46.0805618Z 
2025-09-29T21:31:46.0805926Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:31:46.0806314Z 
2025-09-29T21:31:46.0806450Z     Expected: 200
2025-09-29T21:31:46.0806775Z     Received: 400
2025-09-29T21:31:46.0806965Z 
2025-09-29T21:31:46.0807368Z     [0m [90m 117 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:31:46.0807910Z      [90m 118 |[39m
2025-09-29T21:31:46.0808802Z     [31m[1m>[22m[39m[90m 119 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:31:46.0809723Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-09-29T21:31:46.0810953Z      [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:46.0812174Z      [90m 121 |[39m       [90m// In test mode, may include test_mode when Firebase is not available[39m
2025-09-29T21:31:46.0812963Z      [90m 122 |[39m     })[33m;[39m[0m
2025-09-29T21:31:46.0813256Z 
2025-09-29T21:31:46.0813527Z       at Object.toBe (tests/webhooks.test.js:119:31)
2025-09-29T21:31:46.0813878Z 
2025-09-29T21:31:46.0814474Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should handle subscription events
2025-09-29T21:31:46.0815005Z 
2025-09-29T21:31:46.0815303Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:31:46.0815683Z 
2025-09-29T21:31:46.0815821Z     Expected: 200
2025-09-29T21:31:46.0816155Z     Received: 400
2025-09-29T21:31:46.0816356Z 
2025-09-29T21:31:46.0816705Z     [0m [90m 144 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:31:46.0817026Z      [90m 145 |[39m
2025-09-29T21:31:46.0817537Z     [31m[1m>[22m[39m[90m 146 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:31:46.0818059Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-09-29T21:31:46.0818625Z      [90m 147 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:46.0819293Z      [90m 148 |[39m       [90m// In test mode, may include test_mode when Firebase is not available[39m
2025-09-29T21:31:46.0819731Z      [90m 149 |[39m     })[33m;[39m[0m
2025-09-29T21:31:46.0820093Z 
2025-09-29T21:31:46.0820246Z       at Object.toBe (tests/webhooks.test.js:146:31)
2025-09-29T21:31:46.0820448Z 
2025-09-29T21:31:46.0820816Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should handle unknown event types gracefully
2025-09-29T21:31:46.0821140Z 
2025-09-29T21:31:46.0821309Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:31:46.0821519Z 
2025-09-29T21:31:46.0821595Z     Expected: 200
2025-09-29T21:31:46.0821955Z     Received: 400
2025-09-29T21:31:46.0822071Z 
2025-09-29T21:31:46.0822302Z     [0m [90m 169 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:31:46.0822604Z      [90m 170 |[39m
2025-09-29T21:31:46.0823096Z     [31m[1m>[22m[39m[90m 171 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:31:46.0823786Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-09-29T21:31:46.0824361Z      [90m 172 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:31:46.0825020Z      [90m 173 |[39m       [90m// In test mode, may include test_mode when Firebase is not available[39m
2025-09-29T21:31:46.0825461Z      [90m 174 |[39m     })[33m;[39m[0m
2025-09-29T21:31:46.0825622Z 
2025-09-29T21:31:46.0825768Z       at Object.toBe (tests/webhooks.test.js:171:31)
2025-09-29T21:31:46.0825968Z 
2025-09-29T21:31:46.1439647Z 2025-09-29 21:31:46 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:46.1449047Z 2025-09-29 21:31:46 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:46.1456326Z 2025-09-29 21:31:46 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:46.1464402Z   console.log
2025-09-29T21:31:46.1465075Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:46.1465440Z 
2025-09-29T21:31:46.1465690Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:46.1466021Z 
2025-09-29T21:31:46.1484662Z 2025-09-29 21:31:46 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:46.1492619Z 2025-09-29 21:31:46 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:46.1661380Z 2025-09-29 21:31:46 [[33mwarn[39m]: [33m⚠️ STRIPE_WEBHOOK_SECRET is not set - Stripe webhooks will fail[39m
2025-09-29T21:31:46.1672199Z 2025-09-29 21:31:46 [[31merror[39m]: [31mMissing required environment variables: JWT_SECRET, FIREBASE_API_KEY[39m
2025-09-29T21:31:48.1748858Z   console.log
2025-09-29T21:31:48.1749689Z     🧹 Test cleanup completed
2025-09-29T21:31:48.1750213Z 
2025-09-29T21:31:48.1750449Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:48.1750826Z 
2025-09-29T21:31:48.1813683Z FAIL tests/cors-subdomain.test.js
2025-09-29T21:31:48.1814167Z   CORS Configuration
2025-09-29T21:31:48.1814603Z     CORS Origins Configuration
2025-09-29T21:31:48.1815475Z       ✕ should include expected origins in production configuration (6 ms)
2025-09-29T21:31:48.1816484Z       ✓ should include wildcard localhost in development configuration (2 ms)
2025-09-29T21:31:48.1817404Z       ✕ should return a function for dynamic CORS validation (3 ms)
2025-09-29T21:31:48.1818267Z       ✓ should validate origins correctly through the CORS function (2 ms)
2025-09-29T21:31:48.1818890Z     Wildcard Pattern Matching
2025-09-29T21:31:48.1819568Z       ✓ should match vercel.app subdomains correctly (1 ms)
2025-09-29T21:31:48.1820527Z       ✓ should match localhost subdomains correctly (1 ms)
2025-09-29T21:31:48.1820900Z 
2025-09-29T21:31:48.1821733Z   ● CORS Configuration › CORS Origins Configuration › should include expected origins in production configuration
2025-09-29T21:31:48.1822454Z 
2025-09-29T21:31:48.1822844Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:48.1823311Z 
2025-09-29T21:31:48.1823905Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:48.1825269Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:48.1827067Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:48.1828659Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:48.1829218Z      [90m 121 |[39m     }
2025-09-29T21:31:48.1829661Z      [90m 122 |[39m   }
2025-09-29T21:31:48.1830314Z      [90m 123 |[39m[0m
2025-09-29T21:31:48.1830547Z 
2025-09-29T21:31:48.1830809Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:48.1831806Z       at Object.getConfig (tests/cors-subdomain.test.js:14:22)
2025-09-29T21:31:48.1832227Z 
2025-09-29T21:31:48.1833034Z   ● CORS Configuration › CORS Origins Configuration › should return a function for dynamic CORS validation
2025-09-29T21:31:48.1833693Z 
2025-09-29T21:31:48.1834103Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:31:48.1834560Z 
2025-09-29T21:31:48.1835140Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:31:48.1836532Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:48.1838349Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:31:48.1839478Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:31:48.1840212Z      [90m 121 |[39m     }
2025-09-29T21:31:48.1840603Z      [90m 122 |[39m   }
2025-09-29T21:31:48.1840993Z      [90m 123 |[39m[0m
2025-09-29T21:31:48.1841205Z 
2025-09-29T21:31:48.1841461Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:31:48.1842107Z       at Object.getConfig (tests/cors-subdomain.test.js:49:22)
2025-09-29T21:31:48.1842506Z 
2025-09-29T21:31:48.2488027Z 2025-09-29 21:31:48 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:48.2497774Z 2025-09-29 21:31:48 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:48.2505125Z 2025-09-29 21:31:48 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:48.2512335Z   console.log
2025-09-29T21:31:48.2512819Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:48.2513041Z 
2025-09-29T21:31:48.2513185Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:48.2513392Z 
2025-09-29T21:31:50.2605733Z   console.log
2025-09-29T21:31:50.2606713Z     🧹 Test cleanup completed
2025-09-29T21:31:50.2607156Z 
2025-09-29T21:31:50.2607511Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:50.2608010Z 
2025-09-29T21:31:50.2621448Z PASS tests/stripe-config.test.js
2025-09-29T21:31:50.2622058Z   Stripe Configuration
2025-09-29T21:31:50.2622615Z     Stripe Price IDs Configuration
2025-09-29T21:31:50.2623333Z       ✓ should load all Stripe price ID configurations (1 ms)
2025-09-29T21:31:50.2623994Z       ✓ should handle missing Stripe price IDs gracefully (1 ms)
2025-09-29T21:31:50.2624481Z     Stripe General Configuration
2025-09-29T21:31:50.2624984Z       ✓ should load all Stripe configurations (1 ms)
2025-09-29T21:31:50.2625434Z     Production Environment Validation
2025-09-29T21:31:50.2626034Z       ✓ should not require Stripe configurations in development (1 ms)
2025-09-29T21:31:50.2626745Z       ✓ should validate required configurations in production (1 ms)
2025-09-29T21:31:50.2627219Z   Firebase Configuration
2025-09-29T21:31:50.2627687Z     ✓ should load all Firebase configurations (2 ms)
2025-09-29T21:31:50.2627985Z 
2025-09-29T21:31:50.4211205Z 2025-09-29 21:31:50 [[32minfo[39m]: [32mConfiguration loaded for environment: test[39m
2025-09-29T21:31:50.4221508Z 2025-09-29 21:31:50 [[32minfo[39m]: [32mApp brand: yoohoo.guru[39m
2025-09-29T21:31:50.4228982Z 2025-09-29 21:31:50 [[32minfo[39m]: [32mCORS origins: http://localhost:3000, http://127.0.0.1:3000, http://*.localhost:3000[39m
2025-09-29T21:31:50.4235963Z 2025-09-29 21:31:50 [[32minfo[39m]: [32mServe frontend: true[39m
2025-09-29T21:31:50.4250395Z 2025-09-29 21:31:50 [[32minfo[39m]: [32mFirebase Admin SDK initialized successfully (Firestore-only)[39m
2025-09-29T21:31:50.4258166Z 2025-09-29 21:31:50 [[32minfo[39m]: [32mEnvironment: test[39m
2025-09-29T21:31:50.4266764Z 2025-09-29 21:31:50 [[32minfo[39m]: [32m🔥 Using Firebase project: ceremonial-tea-470904-f3[39m
2025-09-29T21:31:50.4275099Z 2025-09-29 21:31:50 [[32minfo[39m]: [32m✅ Firestore-only configuration active[39m
2025-09-29T21:31:50.4455457Z 2025-09-29 21:31:50 [[33mwarn[39m]: [33m🚨 Frontend serving enabled but dist directory not found: /home/runner/work/yoohooguru/yoohooguru/frontend/dist[39m
2025-09-29T21:31:50.4464035Z 2025-09-29 21:31:50 [[33mwarn[39m]: [33m🚨 Frontend serving will be disabled for this session[39m
2025-09-29T21:31:50.4514160Z   console.log
2025-09-29T21:31:50.4514874Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:50.4515243Z 
2025-09-29T21:31:50.4515494Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:50.4515819Z 
2025-09-29T21:31:50.4709504Z 2025-09-29 21:31:50 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:50 +0000] "GET /api/connect/balance HTTP/1.1" 400 87 "-" "-"[39m
2025-09-29T21:31:50.5008492Z 2025-09-29 21:31:50 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:50 +0000] "POST /api/connect/instant-payout HTTP/1.1" 404 69 "-" "-"[39m
2025-09-29T21:31:50.5379303Z 2025-09-29 21:31:50 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:50 +0000] "POST /api/connect/express-login HTTP/1.1" 400 46 "-" "-"[39m
2025-09-29T21:31:50.5500206Z 2025-09-29 21:31:50 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:50 +0000] "GET /api/feature-flags HTTP/1.1" 200 488 "-" "-"[39m
2025-09-29T21:31:52.5552878Z   console.log
2025-09-29T21:31:52.5553541Z     🧹 Test cleanup completed
2025-09-29T21:31:52.5553799Z 
2025-09-29T21:31:52.5554016Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:52.5554309Z 
2025-09-29T21:31:52.5570723Z PASS tests/payouts.test.js
2025-09-29T21:31:52.5571205Z   Payouts API Tests
2025-09-29T21:31:52.5571594Z     GET /api/connect/balance
2025-09-29T21:31:52.5572365Z       ✓ should return not connected when no Stripe account (25 ms)
2025-09-29T21:31:52.5572906Z     POST /api/payouts/instant
2025-09-29T21:31:52.5573742Z       ✓ should return 404 when instant payouts feature is disabled (33 ms)
2025-09-29T21:31:52.5574402Z     POST /api/connect/express-login
2025-09-29T21:31:52.5575141Z       ✓ should return error when not connected to Stripe (31 ms)
2025-09-29T21:31:52.5575676Z   Feature Flags API Tests
2025-09-29T21:31:52.5576068Z     GET /api/feature-flags
2025-09-29T21:31:52.5576730Z       ✓ should include instantPayouts flag as disabled (9 ms)
2025-09-29T21:31:52.5577122Z 
2025-09-29T21:31:52.6475742Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:52.6485236Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:52.6492502Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:52.6501056Z   console.log
2025-09-29T21:31:52.6501510Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:52.6501735Z 
2025-09-29T21:31:52.6501878Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:52.6502086Z 
2025-09-29T21:31:52.7221864Z 2025-09-29 21:31:52 [[32minfo[39m]: [32mConfiguration loaded for environment: test[39m
2025-09-29T21:31:52.7230285Z 2025-09-29 21:31:52 [[32minfo[39m]: [32mApp brand: yoohoo.guru[39m
2025-09-29T21:31:52.7239042Z 2025-09-29 21:31:52 [[32minfo[39m]: [32mCORS origins: http://localhost:3000, http://127.0.0.1:3000, http://*.localhost:3000[39m
2025-09-29T21:31:52.7246920Z 2025-09-29 21:31:52 [[32minfo[39m]: [32mServe frontend: false[39m
2025-09-29T21:31:52.7400766Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m🎨 Frontend serving disabled - frontend deployed separately (Vercel)[39m
2025-09-29T21:31:52.7558158Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET / HTTP/1.1" 404 222 "-" "-"[39m
2025-09-29T21:31:52.7683809Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET / HTTP/1.1" 404 222 "-" "-"[39m
2025-09-29T21:31:52.7793738Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET /favicon.ico HTTP/1.1" 200 43 "-" "-"[39m
2025-09-29T21:31:52.7952359Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET /favicon.ico HTTP/1.1" 200 43 "-" "-"[39m
2025-09-29T21:31:52.8052969Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET /api HTTP/1.1" 200 152 "-" "-"[39m
2025-09-29T21:31:52.8301990Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET /api HTTP/1.1" 200 152 "-" "-"[39m
2025-09-29T21:31:52.8441636Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET /health HTTP/1.1" 200 324 "-" "-"[39m
2025-09-29T21:31:52.8606543Z 2025-09-29 21:31:52 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:52 +0000] "GET /health HTTP/1.1" 200 324 "-" "-"[39m
2025-09-29T21:31:54.8670484Z   console.log
2025-09-29T21:31:54.8671271Z     🧹 Test cleanup completed
2025-09-29T21:31:54.8671542Z 
2025-09-29T21:31:54.8671755Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:54.8672082Z 
2025-09-29T21:31:54.8686435Z PASS tests/headers.test.js
2025-09-29T21:31:54.8686957Z   Security and Performance Headers
2025-09-29T21:31:54.8687393Z     Root endpoint (/)
2025-09-29T21:31:54.8688016Z       ✓ should include cache-control header (16 ms)
2025-09-29T21:31:54.8688740Z       ✓ should include x-content-type-options header (12 ms)
2025-09-29T21:31:54.8689324Z     Favicon endpoint (/favicon.ico)
2025-09-29T21:31:54.8690190Z       ✓ should include cache-control header (12 ms)
2025-09-29T21:31:54.8690910Z       ✓ should include x-content-type-options header (12 ms)
2025-09-29T21:31:54.8691445Z     API endpoint (/api)
2025-09-29T21:31:54.8692010Z       ✓ should include cache-control header (13 ms)
2025-09-29T21:31:54.8692720Z       ✓ should include x-content-type-options header (26 ms)
2025-09-29T21:31:54.8693259Z     Health endpoint (/health)
2025-09-29T21:31:54.8693883Z       ✓ should include cache-control header (13 ms)
2025-09-29T21:31:54.8694597Z       ✓ should include x-content-type-options header (16 ms)
2025-09-29T21:31:54.8695006Z 
2025-09-29T21:31:54.9300577Z 2025-09-29 21:31:54 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:54.9312193Z 2025-09-29 21:31:54 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:54.9350271Z 2025-09-29 21:31:54 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:54.9358236Z   console.log
2025-09-29T21:31:54.9358899Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:54.9359236Z 
2025-09-29T21:31:54.9359477Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:54.9360034Z 
2025-09-29T21:31:57.3170824Z   console.log
2025-09-29T21:31:57.3171640Z     🧹 Test cleanup completed
2025-09-29T21:31:57.3172031Z 
2025-09-29T21:31:57.3172329Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:57.3172728Z 
2025-09-29T21:31:57.3186910Z PASS tests/stripe-warning.test.js
2025-09-29T21:31:57.3187423Z   Stripe Warning Messages
2025-09-29T21:31:57.3188278Z     ✓ should show development warning when NODE_ENV is development (99 ms)
2025-09-29T21:31:57.3189259Z     ✓ should show production warning when NODE_ENV is production (94 ms)
2025-09-29T21:31:57.3190404Z     ✓ should show development warning when NODE_ENV is not set (96 ms)
2025-09-29T21:31:57.3191332Z     ✓ should not show warning when STRIPE_SECRET_KEY is set (92 ms)
2025-09-29T21:31:57.3191757Z 
2025-09-29T21:31:57.4040532Z 2025-09-29 21:31:57 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:57.4050897Z 2025-09-29 21:31:57 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:57.4058916Z 2025-09-29 21:31:57 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:57.4066978Z   console.log
2025-09-29T21:31:57.4067634Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:57.4067981Z 
2025-09-29T21:31:57.4068221Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:57.4068944Z 
2025-09-29T21:31:59.4160539Z   console.log
2025-09-29T21:31:59.4161206Z     🧹 Test cleanup completed
2025-09-29T21:31:59.4161468Z 
2025-09-29T21:31:59.4161698Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:31:59.4161997Z 
2025-09-29T21:31:59.4175557Z PASS tests/liability.test.js
2025-09-29T21:31:59.4176101Z   Liability API Tests
2025-09-29T21:31:59.4176598Z     Risk Level Categorization
2025-09-29T21:31:59.4177360Z       ✓ should categorize high-risk activities correctly (2 ms)
2025-09-29T21:31:59.4178042Z       ✓ should categorize medium-risk activities correctly (3 ms)
2025-09-29T21:31:59.4178535Z     Emergency Contact Validation
2025-09-29T21:31:59.4179118Z       ✓ should require emergency contact for high-risk activities
2025-09-29T21:31:59.4179732Z       ✓ should reject incomplete emergency contact (1 ms)
2025-09-29T21:31:59.4180360Z     Enhanced Terms and Conditions
2025-09-29T21:31:59.4180895Z       ✓ should include comprehensive liability coverage (1 ms)
2025-09-29T21:31:59.4181451Z       ✓ should specify different risk levels
2025-09-29T21:31:59.4181711Z 
2025-09-29T21:31:59.5003890Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:31:59.5013412Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:31:59.5020271Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:31:59.5027021Z   console.log
2025-09-29T21:31:59.5027591Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:31:59.5027817Z 
2025-09-29T21:31:59.5027962Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:31:59.5028164Z 
2025-09-29T21:31:59.5677333Z 2025-09-29 21:31:59 [[32minfo[39m]: [32mConfiguration loaded for environment: test[39m
2025-09-29T21:31:59.5685627Z 2025-09-29 21:31:59 [[32minfo[39m]: [32mApp brand: yoohoo.guru[39m
2025-09-29T21:31:59.5731354Z 2025-09-29 21:31:59 [[32minfo[39m]: [32mCORS origins: http://localhost:3000, http://127.0.0.1:3000, http://*.localhost:3000[39m
2025-09-29T21:31:59.5739527Z 2025-09-29 21:31:59 [[32minfo[39m]: [32mServe frontend: false[39m
2025-09-29T21:31:59.5878363Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m🎨 Frontend serving disabled - frontend deployed separately (Vercel)[39m
2025-09-29T21:31:59.5980485Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:59 +0000] "GET / HTTP/1.1" 404 222 "-" "-"[39m
2025-09-29T21:31:59.6099181Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:59 +0000] "GET /some-frontend-route HTTP/1.1" 404 222 "-" "-"[39m
2025-09-29T21:31:59.6181424Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:59 +0000] "GET /health HTTP/1.1" 200 324 "-" "-"[39m
2025-09-29T21:31:59.6271610Z 2025-09-29 21:31:59 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:31:59 +0000] "GET /api/nonexistent HTTP/1.1" 404 117 "-" "-"[39m
2025-09-29T21:32:01.6320834Z   console.log
2025-09-29T21:32:01.6321802Z     🧹 Test cleanup completed
2025-09-29T21:32:01.6322084Z 
2025-09-29T21:32:01.6322325Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:32:01.6322649Z 
2025-09-29T21:32:01.6336088Z PASS tests/frontend-serving.test.js
2025-09-29T21:32:01.6336612Z   Frontend Serving Configuration
2025-09-29T21:32:01.6337133Z     when SERVE_FRONTEND is false
2025-09-29T21:32:01.6338107Z       ✓ should return API info for root route instead of trying to serve frontend (11 ms)
2025-09-29T21:32:01.6339021Z       ✓ should return API info for any non-API route (11 ms)
2025-09-29T21:32:01.6340030Z       ✓ should still handle API routes normally (8 ms)
2025-09-29T21:32:01.6341381Z       ✓ should return proper 404 for non-existent API routes (9 ms)
2025-09-29T21:32:01.6341864Z 
2025-09-29T21:32:01.6931494Z 2025-09-29 21:32:01 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:32:01.6941052Z 2025-09-29 21:32:01 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:32:01.6948121Z 2025-09-29 21:32:01 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:32:01.6955546Z   console.log
2025-09-29T21:32:01.6956159Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:32:01.6956443Z 
2025-09-29T21:32:01.6956630Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:32:01.6956895Z 
2025-09-29T21:32:03.7027615Z   console.log
2025-09-29T21:32:03.7028312Z     🧹 Test cleanup completed
2025-09-29T21:32:03.7028593Z 
2025-09-29T21:32:03.7028827Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:32:03.7029155Z 
2025-09-29T21:32:03.7044607Z PASS tests/host-binding.test.js
2025-09-29T21:32:03.7045099Z   Server Host Binding
2025-09-29T21:32:03.7045847Z     ✓ should use 0.0.0.0 as default host for Railway compatibility (5 ms)
2025-09-29T21:32:03.7046686Z     ✓ should respect custom HOST environment variable
2025-09-29T21:32:03.7047043Z 
2025-09-29T21:32:03.7942655Z 2025-09-29 21:32:03 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:32:03.7954346Z 2025-09-29 21:32:03 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:32:03.7962235Z 2025-09-29 21:32:03 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:32:03.7971024Z   console.log
2025-09-29T21:32:03.7971700Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:32:03.7972075Z 
2025-09-29T21:32:03.7972308Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:32:03.7972635Z 
2025-09-29T21:32:03.8654096Z 2025-09-29 21:32:03 [[32minfo[39m]: [32mConfiguration loaded for environment: test[39m
2025-09-29T21:32:03.8663602Z 2025-09-29 21:32:03 [[32minfo[39m]: [32mApp brand: yoohoo.guru[39m
2025-09-29T21:32:03.8673205Z 2025-09-29 21:32:03 [[32minfo[39m]: [32mCORS origins: http://localhost:3000, http://127.0.0.1:3000, http://*.localhost:3000[39m
2025-09-29T21:32:03.8681979Z 2025-09-29 21:32:03 [[32minfo[39m]: [32mServe frontend: false[39m
2025-09-29T21:32:03.8825086Z 2025-09-29 21:32:03 [[32minfo[39m]: [32m🎨 Frontend serving disabled - frontend deployed separately (Vercel)[39m
2025-09-29T21:32:03.8980524Z 2025-09-29 21:32:03 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:32:03 +0000] "GET /favicon.ico HTTP/1.1" 200 43 "-" "-"[39m
2025-09-29T21:32:03.9076186Z 2025-09-29 21:32:03 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:32:03 +0000] "GET /favicon.ico HTTP/1.1" 200 43 "-" "-"[39m
2025-09-29T21:32:03.9171221Z 2025-09-29 21:32:03 [[32minfo[39m]: [32m::ffff:127.0.0.1 - - [29/Sep/2025:21:32:03 +0000] "GET /favicon.ico HTTP/1.1" 200 43 "-" "-"[39m
2025-09-29T21:32:05.9230576Z   console.log
2025-09-29T21:32:05.9231266Z     🧹 Test cleanup completed
2025-09-29T21:32:05.9231527Z 
2025-09-29T21:32:05.9231770Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:32:05.9232099Z 
2025-09-29T21:32:05.9245327Z PASS tests/favicon.test.js
2025-09-29T21:32:05.9245887Z   Favicon Handling
2025-09-29T21:32:05.9246474Z     ✓ should serve favicon.ico successfully (12 ms)
2025-09-29T21:32:05.9247141Z     ✓ should return consistent favicon for multiple requests (19 ms)
2025-09-29T21:32:05.9247506Z 
2025-09-29T21:32:05.9819753Z 2025-09-29 21:32:05 [[32minfo[39m]: [32m🧪 Firebase initialized for testing with EMULATOR[39m
2025-09-29T21:32:05.9830686Z 2025-09-29 21:32:05 [[32minfo[39m]: [32m📍 Firestore Emulator: 127.0.0.1:8080[39m
2025-09-29T21:32:05.9838268Z 2025-09-29 21:32:05 [[32minfo[39m]: [32m📍 Auth Emulator: 127.0.0.1:9099[39m
2025-09-29T21:32:05.9873356Z   console.log
2025-09-29T21:32:05.9873987Z     ✅ Firebase Emulator initialized for testing
2025-09-29T21:32:05.9874249Z 
2025-09-29T21:32:05.9874724Z       at Object.log (jest.setup.js:18:13)
2025-09-29T21:32:05.9874936Z 
2025-09-29T21:32:07.9891358Z   console.log
2025-09-29T21:32:07.9892160Z     🧹 Test cleanup completed
2025-09-29T21:32:07.9892506Z 
2025-09-29T21:32:07.9892785Z       at Object.log (jest.setup.js:32:11)
2025-09-29T21:32:07.9893173Z 
2025-09-29T21:32:07.9905069Z PASS src/index.test.js
2025-09-29T21:32:07.9905980Z   Backend API
2025-09-29T21:32:07.9906528Z     ✓ should pass basic test (1 ms)
2025-09-29T21:32:07.9906815Z 
2025-09-29T21:32:07.9920402Z Summary of all failing tests
2025-09-29T21:32:07.9923736Z FAIL tests/angels-jobs.test.js (5.877 s)
2025-09-29T21:32:07.9927287Z   ● Angels Jobs API › POST /api/angels/jobs › should create a new angel job posting
2025-09-29T21:32:07.9927833Z 
2025-09-29T21:32:07.9929577Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-09-29T21:32:07.9930138Z 
2025-09-29T21:32:07.9936983Z     Expected: ObjectContaining {"description": "Need help moving furniture to new apartment", "featured": true, "postedBy": "test-user-123", "status": "open", "title": "Help with Moving"}
2025-09-29T21:32:07.9938124Z 
2025-09-29T21:32:07.9938301Z     Number of calls: 0
2025-09-29T21:32:07.9938546Z 
2025-09-29T21:32:07.9944572Z     [0m [90m 109 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjob[33m.[39mpostedBy)[33m.[39mtoBe([32m'test-user-123'[39m)[33m;[39m
2025-09-29T21:32:07.9950246Z      [90m 110 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjob[33m.[39mstatus)[33m.[39mtoBe([32m'open'[39m)[33m;[39m
2025-09-29T21:32:07.9968389Z     [31m[1m>[22m[39m[90m 111 |[39m       expect(mockJobRef[33m.[39m[36mset[39m)[33m.[39mtoHaveBeenCalledWith(
2025-09-29T21:32:07.9969516Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-09-29T21:32:07.9970616Z      [90m 112 |[39m         expect[33m.[39mobjectContaining({
2025-09-29T21:32:07.9971572Z      [90m 113 |[39m           title[33m:[39m jobData[33m.[39mtitle[33m,[39m
2025-09-29T21:32:07.9972724Z      [90m 114 |[39m           description[33m:[39m jobData[33m.[39mdescription[33m,[39m[0m
2025-09-29T21:32:07.9973343Z 
2025-09-29T21:32:07.9980726Z       at Object.toHaveBeenCalledWith (tests/angels-jobs.test.js:111:30)
2025-09-29T21:32:07.9981290Z 
2025-09-29T21:32:08.0011041Z   ● Angels Jobs API › GET /api/angels/jobs › should return filtered list of angel jobs
2025-09-29T21:32:08.0011927Z 
2025-09-29T21:32:08.0012498Z     expect(received).toHaveLength(expected)
2025-09-29T21:32:08.0013059Z 
2025-09-29T21:32:08.0013380Z     Expected length: 1
2025-09-29T21:32:08.0013918Z     Received length: 0
2025-09-29T21:32:08.0014462Z     Received array:  []
2025-09-29T21:32:08.0014906Z 
2025-09-29T21:32:08.0015309Z     [0m [90m 196 |[39m
2025-09-29T21:32:08.0016519Z      [90m 197 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0018489Z     [31m[1m>[22m[39m[90m 198 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
2025-09-29T21:32:08.0020054Z      [90m     |[39m                                       [31m[1m^[22m[39m
2025-09-29T21:32:08.0021730Z      [90m 199 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs[[35m0[39m][33m.[39mcategory)[33m.[39mtoBe([32m'home'[39m)[33m;[39m
2025-09-29T21:32:08.0023747Z      [90m 200 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mpagination[33m.[39mtotal)[33m.[39mtoBe([35m1[39m)[33m;[39m
2025-09-29T21:32:08.0025018Z      [90m 201 |[39m       [0m
2025-09-29T21:32:08.0025631Z 
2025-09-29T21:32:08.0026230Z       at Object.toHaveLength (tests/angels-jobs.test.js:198:39)
2025-09-29T21:32:08.0026839Z 
2025-09-29T21:32:08.0027574Z   ● Angels Jobs API › GET /api/angels/jobs › should support search functionality
2025-09-29T21:32:08.0028216Z 
2025-09-29T21:32:08.0028586Z     expect(received).toHaveLength(expected)
2025-09-29T21:32:08.0029172Z 
2025-09-29T21:32:08.0029958Z     Expected length: 1
2025-09-29T21:32:08.0030611Z     Received length: 0
2025-09-29T21:32:08.0031168Z     Received array:  []
2025-09-29T21:32:08.0031525Z 
2025-09-29T21:32:08.0031891Z     [0m [90m 255 |[39m
2025-09-29T21:32:08.0033090Z      [90m 256 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0035401Z     [31m[1m>[22m[39m[90m 257 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
2025-09-29T21:32:08.0036687Z      [90m     |[39m                                       [31m[1m^[22m[39m
2025-09-29T21:32:08.0038215Z      [90m 258 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs[[35m0[39m][33m.[39mtitle)[33m.[39mtoContain([32m'Handyman'[39m)[33m;[39m
2025-09-29T21:32:08.0039307Z      [90m 259 |[39m       
2025-09-29T21:32:08.0046423Z      [90m 260 |[39m       [90m// Restore original function[39m[0m
2025-09-29T21:32:08.0048222Z 
2025-09-29T21:32:08.0050114Z       at Object.toHaveLength (tests/angels-jobs.test.js:257:39)
2025-09-29T21:32:08.0052061Z 
2025-09-29T21:32:08.0061625Z   ● Angels Jobs API › GET /api/angels/jobs › should sort featured jobs to the top
2025-09-29T21:32:08.0069401Z 
2025-09-29T21:32:08.0078918Z     expect(received).toHaveLength(expected)
2025-09-29T21:32:08.0079282Z 
2025-09-29T21:32:08.0079442Z     Expected length: 3
2025-09-29T21:32:08.0079964Z     Received length: 1
2025-09-29T21:32:08.0083050Z     Received array:  [{"applicationCount": 0, "applications": {}, "category": "moving", "createdAt": "2025-09-29T21:31:22.656Z", "description": "Need help moving furniture to new apartment", "estimatedHours": 4, "featured": true, "hourlyRate": 25, "id": "dwXUx9LOBiMbAHJNRXdG", "location": {"city": "Denver", "state": "CO"}, "postedBy": "test-user-123", "skills": ["Heavy Lifting", "Furniture Moving"], "status": "open", "title": "Help with Moving", "updatedAt": "2025-09-29T21:31:22.656Z", "urgency": "normal"}]
2025-09-29T21:32:08.0085483Z 
2025-09-29T21:32:08.0085728Z     [0m [90m 325 |[39m
2025-09-29T21:32:08.0086673Z      [90m 326 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0088173Z     [31m[1m>[22m[39m[90m 327 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m
2025-09-29T21:32:08.0089209Z      [90m     |[39m                                       [31m[1m^[22m[39m
2025-09-29T21:32:08.0089988Z      [90m 328 |[39m       
2025-09-29T21:32:08.0090848Z      [90m 329 |[39m       [90m// Featured job should be first, regardless of creation date[39m
2025-09-29T21:32:08.0092393Z      [90m 330 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjobs[[35m0[39m][33m.[39mtitle)[33m.[39mtoBe([32m'Featured Job'[39m)[33m;[39m[0m
2025-09-29T21:32:08.0093194Z 
2025-09-29T21:32:08.0093542Z       at Object.toHaveLength (tests/angels-jobs.test.js:327:39)
2025-09-29T21:32:08.0093963Z 
2025-09-29T21:32:08.0094676Z   ● Angels Jobs API › GET /api/angels/jobs/:jobId › should return job details with poster information
2025-09-29T21:32:08.0095277Z 
2025-09-29T21:32:08.0095505Z     expected 200 "OK", got 404 "Not Found"
2025-09-29T21:32:08.0095821Z 
2025-09-29T21:32:08.0096385Z     [0m [90m 391 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
2025-09-29T21:32:08.0097377Z      [90m 392 |[39m         [33m.[39m[36mget[39m([32m'/api/angels/jobs/job-123'[39m)
2025-09-29T21:32:08.0098300Z     [31m[1m>[22m[39m[90m 393 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
2025-09-29T21:32:08.0099008Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:32:08.0099509Z      [90m 394 |[39m
2025-09-29T21:32:08.0100592Z      [90m 395 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0102347Z      [90m 396 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mjob[33m.[39mtitle)[33m.[39mtoBe(mockJob[33m.[39mtitle)[33m;[39m[0m
2025-09-29T21:32:08.0103121Z 
2025-09-29T21:32:08.0103430Z       at Object.expect (tests/angels-jobs.test.js:393:10)
2025-09-29T21:32:08.0103914Z       ----
2025-09-29T21:32:08.0104683Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:32:08.0105395Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:32:08.0106129Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:32:08.0107132Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:32:08.0108437Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:32:08.0108893Z 
2025-09-29T21:32:08.0110527Z   ● Angels Jobs API › POST /api/angels/jobs/:jobId/apply › should allow user to apply to a job
2025-09-29T21:32:08.0111093Z 
2025-09-29T21:32:08.0111319Z     expected 200 "OK", got 404 "Not Found"
2025-09-29T21:32:08.0111617Z 
2025-09-29T21:32:08.0112900Z     [0m [90m 482 |[39m         [33m.[39mpost([32m'/api/angels/jobs/job-123/apply'[39m)
2025-09-29T21:32:08.0113953Z      [90m 483 |[39m         [33m.[39msend(applicationData)
2025-09-29T21:32:08.0115621Z     [31m[1m>[22m[39m[90m 484 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
2025-09-29T21:32:08.0116481Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:32:08.0116968Z      [90m 485 |[39m
2025-09-29T21:32:08.0119369Z      [90m 486 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0122509Z      [90m 487 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mapplication[33m.[39mapplicantId)[33m.[39mtoBe([32m'test-user-123'[39m)[33m;[39m[0m
2025-09-29T21:32:08.0123359Z 
2025-09-29T21:32:08.0123658Z       at Object.expect (tests/angels-jobs.test.js:484:10)
2025-09-29T21:32:08.0124145Z       ----
2025-09-29T21:32:08.0124698Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:32:08.0125379Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:32:08.0126446Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:32:08.0127640Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:32:08.0128996Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:32:08.0129448Z 
2025-09-29T21:32:08.0131631Z   ● Angels Jobs API › POST /api/angels/jobs/:jobId/apply › should prevent user from applying to their own job
2025-09-29T21:32:08.0132266Z 
2025-09-29T21:32:08.0132534Z     expected 400 "Bad Request", got 404 "Not Found"
2025-09-29T21:32:08.0132871Z 
2025-09-29T21:32:08.0133611Z     [0m [90m 525 |[39m         [33m.[39mpost([32m'/api/angels/jobs/job-123/apply'[39m)
2025-09-29T21:32:08.0135271Z      [90m 526 |[39m         [33m.[39msend({ message[33m:[39m [32m'I want to apply'[39m })
2025-09-29T21:32:08.0136788Z     [31m[1m>[22m[39m[90m 527 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
2025-09-29T21:32:08.0137542Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:32:08.0138036Z      [90m 528 |[39m
2025-09-29T21:32:08.0140618Z      [90m 529 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-09-29T21:32:08.0143534Z      [90m 530 |[39m       expect(response[33m.[39mbody[33m.[39merror[33m.[39mmessage)[33m.[39mtoBe([32m'Cannot apply to your own job posting'[39m)[33m;[39m[0m
2025-09-29T21:32:08.0144359Z 
2025-09-29T21:32:08.0144656Z       at Object.expect (tests/angels-jobs.test.js:527:10)
2025-09-29T21:32:08.0145142Z       ----
2025-09-29T21:32:08.0145668Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:32:08.0146339Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:32:08.0147809Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:32:08.0148801Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:32:08.0150329Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:32:08.0150789Z 
2025-09-29T21:32:08.0152222Z   ● Angels Jobs API › POST /api/angels/jobs/:jobId/apply › should prevent duplicate applications
2025-09-29T21:32:08.0152801Z 
2025-09-29T21:32:08.0153057Z     expected 400 "Bad Request", got 404 "Not Found"
2025-09-29T21:32:08.0153393Z 
2025-09-29T21:32:08.0154658Z     [0m [90m 567 |[39m         [33m.[39mpost([32m'/api/angels/jobs/job-123/apply'[39m)
2025-09-29T21:32:08.0156462Z      [90m 568 |[39m         [33m.[39msend({ message[33m:[39m [32m'I want to apply again'[39m })
2025-09-29T21:32:08.0157920Z     [31m[1m>[22m[39m[90m 569 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
2025-09-29T21:32:08.0158821Z      [90m     |[39m          [31m[1m^[22m[39m
2025-09-29T21:32:08.0159306Z      [90m 570 |[39m
2025-09-29T21:32:08.0161843Z      [90m 571 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-09-29T21:32:08.0164618Z      [90m 572 |[39m       expect(response[33m.[39mbody[33m.[39merror[33m.[39mmessage)[33m.[39mtoBe([32m'You have already applied to this job'[39m)[33m;[39m[0m
2025-09-29T21:32:08.0165460Z 
2025-09-29T21:32:08.0165762Z       at Object.expect (tests/angels-jobs.test.js:569:10)
2025-09-29T21:32:08.0166238Z       ----
2025-09-29T21:32:08.0166773Z       at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
2025-09-29T21:32:08.0167445Z       at ../node_modules/supertest/lib/test.js:308:13
2025-09-29T21:32:08.0168785Z       at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
2025-09-29T21:32:08.0170132Z       at Test.assert (../node_modules/supertest/lib/test.js:164:23)
2025-09-29T21:32:08.0171477Z       at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)
2025-09-29T21:32:08.0171814Z 
2025-09-29T21:32:08.0173420Z FAIL tests/cors-origin-sync.test.js
2025-09-29T21:32:08.0174483Z   ● Dynamic CORS Origin Sync › Integration › should include api.yoohoo.guru in static origins
2025-09-29T21:32:08.0175160Z 
2025-09-29T21:32:08.0175862Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0176361Z 
2025-09-29T21:32:08.0178977Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0180721Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0187302Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0188517Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0189063Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0189493Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0190147Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0190371Z 
2025-09-29T21:32:08.0190636Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0191329Z       at Object.getConfig (tests/cors-origin-sync.test.js:191:24)
2025-09-29T21:32:08.0191758Z 
2025-09-29T21:32:08.0192166Z FAIL tests/cors-config.test.js
2025-09-29T21:32:08.0193361Z   ● CORS Configuration › Production CORS Origins › should use default production origins when CORS_ORIGIN_PRODUCTION is not set
2025-09-29T21:32:08.0193833Z 
2025-09-29T21:32:08.0194073Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0194349Z 
2025-09-29T21:32:08.0194696Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0197753Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0199455Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0200714Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0201474Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0201872Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0202263Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0202473Z 
2025-09-29T21:32:08.0202727Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0203335Z       at Object.getConfig (tests/cors-config.test.js:39:22)
2025-09-29T21:32:08.0203830Z 
2025-09-29T21:32:08.0204613Z   ● CORS Configuration › Production CORS Origins › should use custom origins when CORS_ORIGIN_PRODUCTION is set
2025-09-29T21:32:08.0205280Z 
2025-09-29T21:32:08.0205667Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0206136Z 
2025-09-29T21:32:08.0207914Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0211709Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0216014Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0216703Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0217008Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0217253Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0217684Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0217902Z 
2025-09-29T21:32:08.0218157Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0218778Z       at Object.getConfig (tests/cors-config.test.js:54:22)
2025-09-29T21:32:08.0219152Z 
2025-09-29T21:32:08.0220101Z   ● CORS Configuration › Production CORS Origins › should handle empty CORS_ORIGIN_PRODUCTION by using defaults
2025-09-29T21:32:08.0220501Z 
2025-09-29T21:32:08.0220935Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0221394Z 
2025-09-29T21:32:08.0223465Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0226717Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0230955Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0232083Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0232564Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0232953Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0233348Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0233474Z 
2025-09-29T21:32:08.0234773Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0235400Z       at Object.getConfig (tests/cors-config.test.js:66:22)
2025-09-29T21:32:08.0235767Z 
2025-09-29T21:32:08.0236438Z   ● CORS Configuration › CORS Origin Validation Function › should allow exact origin matches
2025-09-29T21:32:08.0237047Z 
2025-09-29T21:32:08.0237449Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0237928Z 
2025-09-29T21:32:08.0238524Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0240423Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0243457Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0244400Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0244881Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0245266Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0245603Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0245820Z 
2025-09-29T21:32:08.0246300Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0247012Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0247383Z 
2025-09-29T21:32:08.0250105Z   ● CORS Configuration › CORS Origin Validation Function › should allow wildcard matches for vercel.app
2025-09-29T21:32:08.0250725Z 
2025-09-29T21:32:08.0251116Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0251566Z 
2025-09-29T21:32:08.0253523Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0256909Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0261229Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0262343Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0262846Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0263245Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0263617Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0263828Z 
2025-09-29T21:32:08.0264070Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0265465Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0265857Z 
2025-09-29T21:32:08.0268199Z   ● CORS Configuration › CORS Origin Validation Function › should allow api.yoohoo.guru explicitly
2025-09-29T21:32:08.0268717Z 
2025-09-29T21:32:08.0269142Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0269611Z 
2025-09-29T21:32:08.0272007Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0273792Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0276662Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0277861Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0278395Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0278830Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0279272Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0279455Z 
2025-09-29T21:32:08.0279604Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0280498Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0280906Z 
2025-09-29T21:32:08.0282839Z   ● CORS Configuration › CORS Origin Validation Function › should allow another wildcard match for vercel.app
2025-09-29T21:32:08.0283233Z 
2025-09-29T21:32:08.0283628Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0284117Z 
2025-09-29T21:32:08.0285554Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0288142Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0291788Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0292954Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0293551Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0294372Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0294915Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0308314Z 
2025-09-29T21:32:08.0308629Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0309322Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0309714Z 
2025-09-29T21:32:08.0310593Z   ● CORS Configuration › CORS Origin Validation Function › should block non-matching origins
2025-09-29T21:32:08.0311436Z 
2025-09-29T21:32:08.0311838Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0312312Z 
2025-09-29T21:32:08.0312911Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0314276Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0316089Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0317266Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0317796Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0318235Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0318657Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0318894Z 
2025-09-29T21:32:08.0319161Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0319928Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0320323Z 
2025-09-29T21:32:08.0321204Z   ● CORS Configuration › CORS Origin Validation Function › should allow requests with no origin (mobile apps, Postman)
2025-09-29T21:32:08.0321922Z 
2025-09-29T21:32:08.0322334Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0322819Z 
2025-09-29T21:32:08.0323410Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0324783Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0326590Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0327762Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0328279Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0328723Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0329142Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0329355Z 
2025-09-29T21:32:08.0329616Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0330442Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0330837Z 
2025-09-29T21:32:08.0331603Z   ● CORS Configuration › CORS Origin Validation Function › should allow requests with undefined origin
2025-09-29T21:32:08.0332224Z 
2025-09-29T21:32:08.0332635Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0333112Z 
2025-09-29T21:32:08.0333679Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0335022Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0336810Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0337941Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0338451Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0338878Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0339281Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0339510Z 
2025-09-29T21:32:08.0339903Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0340748Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0341156Z 
2025-09-29T21:32:08.0342624Z   ● CORS Configuration › CORS Origin Validation Function › should validate all required origins from issue spec
2025-09-29T21:32:08.0343307Z 
2025-09-29T21:32:08.0343861Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0344476Z 
2025-09-29T21:32:08.0345303Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0346665Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0350963Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0352100Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0352590Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0353051Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0353448Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0353666Z 
2025-09-29T21:32:08.0353963Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0355252Z       at Object.getConfig (tests/cors-config.test.js:86:22)
2025-09-29T21:32:08.0355701Z 
2025-09-29T21:32:08.0357144Z FAIL tests/webhooks.test.js
2025-09-29T21:32:08.0357950Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should accept valid webhook with proper signature
2025-09-29T21:32:08.0358308Z 
2025-09-29T21:32:08.0358491Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:32:08.0358707Z 
2025-09-29T21:32:08.0361507Z     Expected: 200
2025-09-29T21:32:08.0361838Z     Received: 400
2025-09-29T21:32:08.0362022Z 
2025-09-29T21:32:08.0362431Z     [0m [90m 51 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:32:08.0362807Z      [90m 52 |[39m
2025-09-29T21:32:08.0363547Z     [31m[1m>[22m[39m[90m 53 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:32:08.0364451Z      [90m    |[39m                               [31m[1m^[22m[39m
2025-09-29T21:32:08.0366267Z      [90m 54 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0367912Z      [90m 55 |[39m       [90m// In test mode, may also include test_mode: true[39m
2025-09-29T21:32:08.0368596Z      [90m 56 |[39m     })[33m;[39m[0m
2025-09-29T21:32:08.0368873Z 
2025-09-29T21:32:08.0369636Z       at Object.toBe (tests/webhooks.test.js:53:31)
2025-09-29T21:32:08.0370120Z 
2025-09-29T21:32:08.0373574Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should process webhook successfully even when stripe key is missing in test env
2025-09-29T21:32:08.0374481Z 
2025-09-29T21:32:08.0374779Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:32:08.0375146Z 
2025-09-29T21:32:08.0375290Z     Expected: 200
2025-09-29T21:32:08.0377009Z     Received: 400
2025-09-29T21:32:08.0377225Z 
2025-09-29T21:32:08.0377636Z     [0m [90m 91 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:32:08.0378168Z      [90m 92 |[39m
2025-09-29T21:32:08.0378736Z     [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:32:08.0379402Z      [90m    |[39m                               [31m[1m^[22m[39m
2025-09-29T21:32:08.0380660Z      [90m 94 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0381567Z      [90m 95 |[39m     })[33m;[39m
2025-09-29T21:32:08.0382050Z      [90m 96 |[39m[0m
2025-09-29T21:32:08.0382297Z 
2025-09-29T21:32:08.0382577Z       at Object.toBe (tests/webhooks.test.js:93:31)
2025-09-29T21:32:08.0382938Z 
2025-09-29T21:32:08.0383950Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should handle payment_intent.succeeded event
2025-09-29T21:32:08.0384576Z 
2025-09-29T21:32:08.0384981Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:32:08.0385228Z 
2025-09-29T21:32:08.0385476Z     Expected: 200
2025-09-29T21:32:08.0385789Z     Received: 400
2025-09-29T21:32:08.0385976Z 
2025-09-29T21:32:08.0387036Z     [0m [90m 117 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:32:08.0387884Z      [90m 118 |[39m
2025-09-29T21:32:08.0389142Z     [31m[1m>[22m[39m[90m 119 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:32:08.0390283Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-09-29T21:32:08.0392534Z      [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0393825Z      [90m 121 |[39m       [90m// In test mode, may include test_mode when Firebase is not available[39m
2025-09-29T21:32:08.0394657Z      [90m 122 |[39m     })[33m;[39m[0m
2025-09-29T21:32:08.0394970Z 
2025-09-29T21:32:08.0395416Z       at Object.toBe (tests/webhooks.test.js:119:31)
2025-09-29T21:32:08.0395795Z 
2025-09-29T21:32:08.0396966Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should handle subscription events
2025-09-29T21:32:08.0397300Z 
2025-09-29T21:32:08.0397763Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:32:08.0398152Z 
2025-09-29T21:32:08.0398293Z     Expected: 200
2025-09-29T21:32:08.0398977Z     Received: 400
2025-09-29T21:32:08.0399166Z 
2025-09-29T21:32:08.0399569Z     [0m [90m 144 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:32:08.0400515Z      [90m 145 |[39m
2025-09-29T21:32:08.0402594Z     [31m[1m>[22m[39m[90m 146 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:32:08.0403580Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-09-29T21:32:08.0405448Z      [90m 147 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0406958Z      [90m 148 |[39m       [90m// In test mode, may include test_mode when Firebase is not available[39m
2025-09-29T21:32:08.0407727Z      [90m 149 |[39m     })[33m;[39m[0m
2025-09-29T21:32:08.0408018Z 
2025-09-29T21:32:08.0408322Z       at Object.toBe (tests/webhooks.test.js:146:31)
2025-09-29T21:32:08.0408711Z 
2025-09-29T21:32:08.0410440Z   ● Stripe Webhooks › POST /api/webhooks/stripe › should handle unknown event types gracefully
2025-09-29T21:32:08.0411061Z 
2025-09-29T21:32:08.0411377Z     expect(received).toBe(expected) // Object.is equality
2025-09-29T21:32:08.0411771Z 
2025-09-29T21:32:08.0411921Z     Expected: 200
2025-09-29T21:32:08.0412275Z     Received: 400
2025-09-29T21:32:08.0412482Z 
2025-09-29T21:32:08.0413346Z     [0m [90m 169 |[39m         [33m.[39msend(payload)[33m;[39m
2025-09-29T21:32:08.0413930Z      [90m 170 |[39m
2025-09-29T21:32:08.0416051Z     [31m[1m>[22m[39m[90m 171 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
2025-09-29T21:32:08.0416713Z      [90m     |[39m                               [31m[1m^[22m[39m
2025-09-29T21:32:08.0419247Z      [90m 172 |[39m       expect(response[33m.[39mbody[33m.[39mreceived)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-09-29T21:32:08.0421521Z      [90m 173 |[39m       [90m// In test mode, may include test_mode when Firebase is not available[39m
2025-09-29T21:32:08.0422329Z      [90m 174 |[39m     })[33m;[39m[0m
2025-09-29T21:32:08.0422612Z 
2025-09-29T21:32:08.0424455Z       at Object.toBe (tests/webhooks.test.js:171:31)
2025-09-29T21:32:08.0424839Z 
2025-09-29T21:32:08.0425091Z FAIL tests/cors-subdomain.test.js
2025-09-29T21:32:08.0426288Z   ● CORS Configuration › CORS Origins Configuration › should include expected origins in production configuration
2025-09-29T21:32:08.0427005Z 
2025-09-29T21:32:08.0427432Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0427938Z 
2025-09-29T21:32:08.0428710Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0430294Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0432707Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0433594Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0434097Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0434493Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0434921Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0435143Z 
2025-09-29T21:32:08.0435386Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0438855Z       at Object.getConfig (tests/cors-subdomain.test.js:14:22)
2025-09-29T21:32:08.0439254Z 
2025-09-29T21:32:08.0440183Z   ● CORS Configuration › CORS Origins Configuration › should return a function for dynamic CORS validation
2025-09-29T21:32:08.0440815Z 
2025-09-29T21:32:08.0441195Z     Missing required environment variables: JWT_SECRET, FIREBASE_API_KEY
2025-09-29T21:32:08.0441652Z 
2025-09-29T21:32:08.0442209Z     [0m [90m 118 |[39m     [36mif[39m (missingVars[33m.[39mlength [33m>[39m [35m0[39m) {
2025-09-29T21:32:08.0445146Z      [90m 119 |[39m       logger[33m.[39merror([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0449237Z     [31m[1m>[22m[39m[90m 120 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Missing required environment variables: ${missingVars.join(', ')}`[39m)[33m;[39m
2025-09-29T21:32:08.0450499Z      [90m     |[39m             [31m[1m^[22m[39m
2025-09-29T21:32:08.0450975Z      [90m 121 |[39m     }
2025-09-29T21:32:08.0451380Z      [90m 122 |[39m   }
2025-09-29T21:32:08.0451757Z      [90m 123 |[39m[0m
2025-09-29T21:32:08.0451984Z 
2025-09-29T21:32:08.0452228Z       at getConfig (src/config/appConfig.js:120:13)
2025-09-29T21:32:08.0453675Z       at Object.getConfig (tests/cors-subdomain.test.js:49:22)
2025-09-29T21:32:08.0454068Z 
2025-09-29T21:32:08.0454079Z 
2025-09-29T21:32:08.0460640Z Test Suites: 5 failed, 1 skipped, 15 passed, 20 of 21 total
2025-09-29T21:32:08.0461312Z Tests:       27 failed, 14 skipped, 120 passed, 161 total
2025-09-29T21:32:08.0461624Z Snapshots:   0 total
2025-09-29T21:32:08.0461834Z Time:        47.59 s
2025-09-29T21:32:08.0462047Z Ran all test suites.
2025-09-29T21:32:08.2444086Z [33m[1m⚠ [22m[39m Script exited unsuccessfully (code 1)
2025-09-29T21:32:08.7458805Z [36m[1mi  emulators:[22m[39m Shutting down emulators.
2025-09-29T21:32:08.7462178Z [36m[1mi  firestore:[22m[39m Stopping Firestore Emulator
2025-09-29T21:32:09.0780707Z [36m[1mi  auth:[22m[39m Stopping Authentication Emulator
2025-09-29T21:32:09.0784789Z [36m[1mi  hub:[22m[39m Stopping emulator hub
2025-09-29T21:32:09.0791819Z [36m[1mi  logging:[22m[39m Stopping Logging Emulator
2025-09-29T21:32:09.0821286Z 
2025-09-29T21:32:09.0823277Z [1m[31mError:[39m[22m Script "[1mnpx jest --forceExit --runInBand --detectOpenHandles --verbose[22m" exited with code 1
2025-09-29T21:32:09.3731097Z npm error Lifecycle script `test` failed with error:
2025-09-29T21:32:09.3735416Z npm error code 1
2025-09-29T21:32:09.3736319Z npm error path /home/runner/work/yoohooguru/yoohooguru/backend
2025-09-29T21:32:09.3737252Z npm error workspace yoohooguru-backend@1.0.0
2025-09-29T21:32:09.3738258Z npm error location /home/runner/work/yoohooguru/yoohooguru/backend
2025-09-29T21:32:09.3738974Z npm error command failed
2025-09-29T21:32:09.3740573Z npm error command sh -c firebase emulators:exec --project=demo-yoohooguru-test --only firestore,auth 'npx jest --forceExit --runInBand --detectOpenHandles --verbose'
2025-09-29T21:32:09.3808402Z ##[error]Process completed with exit code 1.
2025-09-29T21:32:09.3917511Z Post job cleanup.
2025-09-29T21:32:09.4853351Z [command]/usr/bin/git version
2025-09-29T21:32:09.4896519Z git version 2.51.0
2025-09-29T21:32:09.4940486Z Temporarily overriding HOME='/home/runner/work/_temp/ef072d57-bdb0-4d20-a971-4011b5f5dc0f' before making global git config changes
2025-09-29T21:32:09.4941932Z Adding repository directory to the temporary git global config as a safe directory
2025-09-29T21:32:09.4946819Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/yoohooguru/yoohooguru
2025-09-29T21:32:09.4981439Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-09-29T21:32:09.5013699Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-09-29T21:32:09.5238053Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-09-29T21:32:09.5258124Z http.https://github.com/.extraheader
2025-09-29T21:32:09.5270682Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-09-29T21:32:09.5300580Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-09-29T21:32:09.5629111Z Evaluate and set job outputs
2025-09-29T21:32:09.5635318Z Cleaning up orphan processes
